# CLAUDE.md - AUTOMATEHUB PROJECT CONTEXT

## üéØ PROJECT OVERVIEW

**Name:** AutomateHub
**Domain:** https://automatehub.fr
**Tech Stack:** Laravel 12 + React + Inertia + MySQL + OneUI (backend) + Custom frontend styling
**Purpose:** French learning platform for n8n automation with freemium model

## üìã PROJECT ARCHITECTURE

### Infrastructure
- **Location:** `/var/www/automatehub/`
- **Framework:** Laravel 12 (PHP 8.2+)
- **Frontend:** React 19 + Inertia.js + Tailwind CSS 4
- **Database:** MySQL (automatehub database)
- **Theme:** OneUI5 for backend admin interface
- **Server:** Nginx + SSL (Let's Encrypt)

### Key Technologies
- **Backend:** Laravel 12, PHP 8.2, MySQL
- **Frontend:** React 19, Inertia.js, TypeScript, Tailwind CSS 4
- **UI Components:** Radix UI, Headless UI
- **Build Tools:** Vite, Prettier, ESLint
- **Testing:** Pest PHP
- **Queue:** Laravel Queue system
- **Authentication:** Laravel Breeze with custom modifications

## üèóÔ∏è SYSTEM STRUCTURE

### User System
- **Free Users:** Access to free tutorials, limited downloads
- **Premium Users (39‚Ç¨/mois):** All free content + premium tutorials
- **Business Users (97‚Ç¨/mois):** Everything + custom tutorials + enterprise features
- **Admin Users:** Full platform management access

### Core Features
1. **Tutorial System:** Video tutorials with downloadable n8n workflows
2. **Badge System:** Gamification with progression tracking
3. **Quiz System:** n8n level assessment
4. **Analytics:** User behavior tracking and reporting
5. **Download System:** Secure file downloads with usage limits
6. **Blog System:** Content marketing and SEO
7. **Contact System:** User support and communication

## üîê ACCESS STRATEGY

### Public Frontend
- Accessible to all visitors
- Tutorial previews to encourage registration
- Strong call-to-action for registration throughout

### User Dashboard
- **ALL users must register** (including free tier)
- Access based on subscription_type (free/premium/pro)
- Personal progress tracking and badges
- Tutorial access with restrictions

### Admin Backend
- OneUI5 theme for professional interface
- Complete user management
- Content management (tutorials, blog, categories)
- Analytics dashboard
- Financial tracking and reporting

## üìä DATABASE MODELS

### Core Models
- **User:** Extended with professional fields, n8n levels, subscription types, company info
- **Tutorial:** With categories, tags, difficulty levels, downloadable files, video content
- **Category/Tag:** Content organization with hierarchical structure
- **Badge:** Gamification system with types (completion, streak, milestone)
- **Download:** File tracking with usage limits and security
- **Analytics:** User behavior tracking with detailed event data
- **UserTutorialProgress:** Learning progression with completion tracking
- **BlogPost:** Content marketing with SEO optimization
- **Workflow:** n8n workflow files with metadata and versioning
- **UserBadge:** Junction table for badge assignments with timestamps
- **TutorialTag:** Many-to-many relationship for tutorial categorization

### Key Relationships
- User has many downloads, tutorials progress, badges, analytics events
- Tutorial belongs to category, has many tags, tracks user progress
- Users can favorite tutorials, track completion, earn badges
- Analytics track comprehensive user actions and engagement metrics
- Workflows linked to tutorials with download tracking

## üõ£Ô∏è ROUTING STRUCTURE

### Public Routes (`web.php`)
- Home, tutorials preview, blog, contact, legal pages
- No authentication required
- SEO optimized

### User Routes (`user.php`)
- Dashboard, tutorial access, downloads, profile
- Requires authentication
- Subscription-based access control

### Admin Routes (`admin.php`)
- User management, content management, analytics
- Requires admin role
- OneUI interface

### Settings Routes (`settings.php`)
- Profile management, password changes
- User-specific settings

## üîß SERVICES & BUSINESS LOGIC

### Core Services
- **AnalyticsService:** Track user behavior, generate reports, KPI calculations
- **BadgeService:** Manage gamification, award badges automatically
- **TutorialService:** Handle tutorial logic, recommendations, progress tracking
- **RestrictionService:** Manage freemium access controls and upgrade prompts
- **NotificationService:** Email notifications and alerts
- **QuizService:** n8n level assessment and scoring
- **UpgradePromptService:** Conversion optimization and upgrade tracking
- **N8nApiService:** Complete n8n integration with workflows, execution, import/export

### Event System
- **UserRegistered:** Send welcome email, award initial badges, set n8n level
- **TutorialCompleted:** Track progress, check for new badges, update analytics
- **DownloadCompleted:** Track usage, check limits, analytics tracking
- **BadgeAwarded:** Notification system, progress updates
- **WorkflowExecuted:** n8n integration tracking

## üì± FRONTEND ARCHITECTURE

### Public Frontend
- Clean, modern design
- Mobile-responsive
- SEO optimized
- Conversion-focused

### User Dashboard
- Personalized experience
- Progress tracking
- Subscription management
- Tutorial access

### Admin Interface
- OneUI5 theme
- Data tables with search/filter
- Analytics dashboards
- CRUD operations

## üé® STYLING APPROACH

### Backend (Admin)
- OneUI5 theme (`/public/oneui/`)
- Professional dashboard interface
- Consistent with Laravel admin standards

### Frontend (Public/User)
- Custom Tailwind CSS 4
- Modern, clean design
- Mobile-first approach
- Conversion optimization

## üîí SECURITY & PERMISSIONS

### Middleware
- **IsAdmin:** Restrict admin access
- **IsPremium:** Control premium content
- **HandleInertiaRequests:** Manage Inertia.js requests
- **HandleAppearance:** Theme management

### Authentication
- Laravel Breeze base with custom modifications
- Professional user registration option
- Quiz-based n8n level assignment
- RGPD compliance

## üìà ANALYTICS & TRACKING

### User Analytics
- Registration tracking
- Tutorial completion rates
- Download usage patterns
- Subscription conversion metrics

### Business Metrics
- User acquisition
- Feature usage
- Revenue tracking
- Churn analysis

## üöÄ DEVELOPMENT STATUS

### ‚úÖ COMPLETED PHASES
1. **Infrastructure:** Server, Laravel 12, database, OneUI5 setup
2. **Database:** All models, migrations, relationships (18 migrations)
3. **Authentication:** Custom registration with pro/personal distinction, quiz integration
4. **Services:** Complete business logic services (8 core services)
5. **Backend Logic:** Controllers, middleware, event system
6. **n8n Integration:** Complete API service with workflow management
7. **Analytics:** Comprehensive tracking system and KPI reporting
8. **Admin Interface:** OneUI5 dashboard with user/content management
9. **Gamification:** Badge system with automatic awarding
10. **Security:** Middleware, permissions, access controls

### üîÑ IN PROGRESS (Frontend Development - 25%)
- React components for user dashboard
- Inertia.js page implementations
- TypeScript integration
- Tailwind CSS 4 styling
- Radix UI component integration

### üìã IMMEDIATE NEXT STEPS
- Complete React frontend components
- Stripe/PayPal payment integration
- Email notification templates
- Advanced user onboarding flow
- Mobile responsive optimizations

### üéØ COMPLETION STATUS
- **Backend:** 95% complete (Laravel services, models, controllers)
- **Database:** 100% complete (all models and relationships)
- **Business Logic:** 90% complete (services and workflows)
- **Admin Interface:** 85% complete (OneUI implementation)
- **Frontend React:** 25% complete (structure in place)
- **Payment System:** 15% complete (routes defined, integration pending)
- **Overall Project:** 75% complete

## üõ†Ô∏è DEVELOPMENT COMMANDS

### Laravel Commands
```bash
# Start development server
php artisan serve

# Run migrations
php artisan migrate

# Seed database
php artisan db:seed

# Clear cache
php artisan cache:clear
php artisan config:clear
php artisan view:clear

# Run tests
php artisan test
```

### Frontend Commands
```bash
# Install dependencies
npm install

# Development server
npm run dev

# Build for production
npm run build

# Code formatting
npm run format

# Linting
npm run lint
```

## üéØ BUSINESS OBJECTIVES

### Primary Goals
1. **User Acquisition:** Capture email addresses for nurturing
2. **Conversion:** Free ‚Üí Premium ‚Üí Pro subscription journey
3. **Engagement:** High tutorial completion rates
4. **Retention:** Badge system and progression tracking

### Marketing Strategy
- SEO-optimized content
- Free tier as lead magnet
- Email marketing campaigns
- Social media integration potential

## üîß TECHNICAL CONSIDERATIONS

### Performance
- Vite for fast builds
- Lazy loading for large content
- Database indexing on frequently queried columns
- File caching for downloads

### Security
- Input validation on all forms
- CSRF protection
- SQL injection prevention
- Secure file downloads
- RGPD compliance

### Scalability
- Service-oriented architecture
- Queue system for heavy operations
- Modular component structure
- API-ready design

## üìä BUSINESS CONTEXT & MARKET ANALYSIS

### YouTube Success & Growth
- **Cha√Æne YouTube** : 16 vid√©os en 1 mois, 322 abonn√©s, 5.2k vues
- **Rythme publication** : 4 vid√©os/semaine (excellent momentum)
- **March√© fran√ßais N8N** : Quasi-vierge, forte opportunit√©
- **Positionnement unique** : Workflows cr√©√©s par Claude IA + vid√©os explicatives

### Business Model & Projections
- **Freemium** : Contenu gratuit (acquisition)
- **Premium** : 39‚Ç¨/mois (contenu premium + communaut√©) - OPTIMIS√â 07/2025
- **Business** : 97‚Ç¨/mois (workflows sur-mesure par Claude) - OPTIMIS√â 07/2025
- **Projection 6 mois** : 2,200-2,900‚Ç¨/mois CA
- **Objectif 12 mois** : 8,000-12,000‚Ç¨/mois CA

### Strategy Content/Workflows
1. **Claude cr√©e workflow** (architecture + logique)
2. **Impl√©mentation n8n** (test + validation)  
3. **Vid√©o explicative** (√©tapes + cas d'usage)
4. **Upload AutomateHub** (premium/business selon complexit√©)
5. **Community gamifi√©e** (badges, progression, pas Discord/Skool)

### Infrastructure Strategy
- **Migration VPS XL d√©di√©e** : N8N n√©cessite 2-3 GB RAM
- **Isolation projet** : Performance garantie vs autres projets
- **Scaling pr√©vu** : 15k+ utilisateurs potentiels

**üìÑ ANALYSE COMPL√àTE** : Voir `/var/www/automatehub/MARKET-ANALYSIS-PROJECTIONS.md`

## üìù IMPORTANT NOTES

### Database Considerations
- Users table extended with professional fields (company, phone, n8n_level)
- Soft deletes on critical models (User, Tutorial, BlogPost)
- Comprehensive indexing strategy on frequently queried columns
- Analytics table for performance tracking with detailed event data

### File Management
- Secure tutorial file storage with access control
- Download tracking and limits per subscription type
- Video storage optimization and CDN considerations
- Backup strategy and file versioning

### User Experience
- Mandatory registration for all features (no anonymous access)
- Clear subscription benefits and upgrade prompts
- Progress tracking and gamification with badge system
- Responsive design across devices (mobile-first approach)

### Business Logic
- Freemium model with clear upgrade paths
- n8n level assessment through quiz system
- Professional vs personal user distinction
- Comprehensive analytics for business intelligence

### Technical Architecture
- Service-oriented architecture with clean separation
- Event-driven system for user actions
- Queue system for heavy operations
- API-ready design for future mobile apps

## üåç ENVIRONMENT NOTES

### Production Environment
- Nous sommes en environnement de production
- Le projet tourne en production actuellement

---

## üí∞ OPTIMISATION TARIFS (Juillet 2025)

### **ANCIENS TARIFS (sous-√©valu√©s) :**
- Freemium : 0‚Ç¨
- Premium : 17‚Ç¨/mois  
- Business : 47‚Ç¨/mois

### **NOUVEAUX TARIFS OPTIMIS√âS :**
- **Freemium** : 0‚Ç¨ (acquisition)
- **Premium** : **39‚Ç¨/mois** (+130%)
- **Business** : **97‚Ç¨/mois** (+106%)

### **JUSTIFICATION MARCH√â :**
- **√âcole Cube** (Make) : 1,980‚Ç¨ formation
- **Systeme.io** Premium : 97‚Ç¨/mois
- **Kajabi** Business : 119-319‚Ç¨/mois
- **Formations Corporate** : 100-300‚Ç¨/mois

### **AVANTAGES UNIQUES AutomateHub :**
‚úÖ **67 workflows IA** (aucun concurrent)
‚úÖ **March√© fran√ßais n8n quasi-vierge**
‚úÖ **Cr√©ation sur-mesure IA** (unique)
‚úÖ **Communaut√© gamifi√©e** (innovation)
‚úÖ **ROI client √©norme** vs formations classiques

### **IMPACT PROJECTIONS :**
- **CA 6 mois** : 2,200-2,900‚Ç¨/mois (+107%)
- **CA 12 mois** : 8,000-12,000‚Ç¨/mois (+60%)
- **Positionnement** : Premium justifi√© march√© fran√ßais

---

**Last Updated:** 2025-07-10  
**Version:** 1.3 - TARIFS OPTIMIS√âS
**Status:** Backend production-ready (75% complete), Frontend development in progress

This document should be referenced at the start of each development session to maintain context and ensure consistency across all development activities. The project has a solid Laravel backend foundation with comprehensive business logic, requiring primarily frontend React component development to reach full completion.

## MCP (Model Context Protocol) Servers disponibles

Une structure centralis√©e de MCP servers a √©t√© mise en place dans `/var/www/MCP/` pour √™tre partag√©e entre tous les projets.

### MCP install√©s et disponibles :

#### ‚úÖ Install√©s et fonctionnels
- **mcp-server-mysql** : Connexion MySQL directe (dans core/)
- **task-master-ai** : Gestion de t√¢ches IA avanc√©e (dans core/claude-task-master/)
- **exa-mcp-server** : Recherche IA puissante (dans ai/)
- **datadog-mcp-server** : Monitoring et observabilit√© (dans devops/)
- **playwright-mcp-server** : Automatisation navigateur (dans testing/)

#### üîÑ En attente / Placeholders
- **laravel-mcp** : Int√©gration Laravel (placeholder)
- **laravel-loop** : Bridge Laravel pour AI (placeholder)
- **n8n-mcp** : D√©j√† pr√©sent dans automation/ (d√©plac√© depuis automatehub)

### Configuration dans claude_desktop_config.json

Exemple pour MySQL :
```json
{
  "mcpServers": {
    "mysql": {
      "command": "node",
      "args": ["/var/www/MCP/core/mcp-server-mysql/node_modules/.bin/mcp-mysql-server"],
      "env": {
        "DB_HOST": "localhost",
        "DB_USER": "your_user",
        "DB_PASSWORD": "your_password",
        "DB_NAME": "your_database"
      }
    }
  }
}
```

Exemple pour Task Master :
```json
{
  "mcpServers": {
    "task-master": {
      "command": "npx",
      "args": ["task-master-ai", "mcp"],
      "cwd": "/var/www/MCP/core/claude-task-master",
      "env": {
        "ANTHROPIC_API_KEY": "your_api_key"
      }
    }
  }
}
```

### MCP recommand√©s pour ce projet

- mysql (base de donn√©es)
- n8n-mcp (workflows)
- task-master (gestion des t√¢ches)

---
*MCP install√©s le : Sun Jul 13 12:01:15 CEST 2025*

