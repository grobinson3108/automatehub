{
  "meta": {
    "instanceId": "408f9fb9940c3cb18ffdef0e0150fe342d6e655c3a9fac21f0f644e8bedabcd9"
  },
  "nodes": [
    {
      "id": "f55b3110-f960-4d89-afba-d47bc58102eb",
      "name": "D√©clencheur Twilio",
      "type": "n8n-nodes-base.twilioTrigger",
      "position": [
        100,
        180
      ],
      "webhookId": "bfc8f587-8183-46f8-9e76-3576caddf8c0",
      "parameters": {
        "updates": [
          "com.twilio.messaging.inbound-message.received"
        ]
      },
      "credentials": {
        "twilioApi": {
          "id": "TJv4H4lXxPCLZT50",
          "name": "Twilio account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "8472f5b0-329f-45ac-b35f-c42558daa7c7",
      "name": "Mod√®le de Chat OpenAI1",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        1140,
        1360
      ],
      "parameters": {
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "8gccIjcuf3gvaoEr",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "4b3e8a26-c808-46e5-bbcf-2e1279989a0b",
      "name": "Trouver des candidats pour le suivi",
      "type": "n8n-nodes-base.airtable",
      "position": [
        720,
        1240
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "list",
          "value": "appO2nHiT9XPuGrjN",
          "cachedResultUrl": "https://airtable.com/appO2nHiT9XPuGrjN",
          "cachedResultName": "Twilio-Scheduling-Agent"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblokH7uw63RpIlQ0",
          "cachedResultUrl": "https://airtable.com/appO2nHiT9XPuGrjN/tblokH7uw63RpIlQ0",
          "cachedResultName": "Lead Tracker"
        },
        "options": {},
        "operation": "search",
        "filterByFormula": "=AND(\n  {appointment_id} = '',\n  {status} != 'STOP',\n  {followup_count} < 3,\n  DATETIME_DIFF(TODAY(), {last_followup_at}, 'days') >= 3\n)"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "Und0frCQ6SNVX3VV",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "04dc979c-ad36-4e57-93d4-905929fe1af0",
      "name": "Envoyer un message de suivi",
      "type": "n8n-nodes-base.twilio",
      "position": [
        1880,
        1240
      ],
      "parameters": {
        "to": "={{ $('Find Follow-Up Candidates').item.json.session_id }}",
        "from": "={{ $('Find Follow-Up Candidates').item.json.twilio_service_number }}",
        "message": "={{ $('Generate Follow Up Message').item.json.text }}\nR√©pondez STOP pour ne plus recevoir ces messages.",
        "options": {}
      },
      "credentials": {
        "twilioApi": {
          "id": "TJv4H4lXxPCLZT50",
          "name": "Twilio account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "55e222af-fb59-4ffd-9661-350b1972e802",
      "name": "Note Autocollante",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        570,
        943
      ],
      "parameters": {
        "color": 7,
        "width": 408.6631332343324,
        "height": 515.2449997772154,
        "content": "## √âtape 6. Filtrer les demandes ouvertes depuis Airtable\n\n### üí°Crit√®res pour les candidats au suivi\n* Aucun rendez-vous programm√©\n* Aucune demande d'arr√™t (STOP)\n* Aucun suivi pr√©c√©dent dans les 3 derniers jours\n* Le suivi est inf√©rieur √† 3 fois"
      },
      "typeVersion": 1
    },
    {
      "id": "50d0c632-233b-4b31-b396-3fa603aecd03",
      "name": "Mettre √† jour le nombre et la date du suivi",
      "type": "n8n-nodes-base.airtable",
      "position": [
        1700,
        1240
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "list",
          "value": "appO2nHiT9XPuGrjN",
          "cachedResultUrl": "https://airtable.com/appO2nHiT9XPuGrjN",
          "cachedResultName": "Twilio-Scheduling-Agent"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblokH7uw63RpIlQ0",
          "cachedResultUrl": "https://airtable.com/appO2nHiT9XPuGrjN/tblokH7uw63RpIlQ0",
          "cachedResultName": "Lead Tracker"
        },
        "columns": {
          "value": {
            "session_id": "={{ $('Find Follow-Up Candidates').item.json.session_id }}",
            "followup_count": "={{ ($('Find Follow-Up Candidates').item.json.followup_count ?? 0) + 1 }}",
            "last_followup_at": "={{ $now.toISO() }}"
          },
          "schema": [
            {
              "id": "id",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": true,
              "required": false,
              "displayName": "id",
              "defaultMatch": true
            },
            {
              "id": "session_id",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "session_id",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "status",
              "type": "options",
              "display": true,
              "options": [
                {
                  "name": "ACTIVE",
                  "value": "ACTIVE"
                },
                {
                  "name": "STOP",
                  "value": "STOP"
                }
              ],
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "customer_name",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "customer_name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "customer_summary",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "customer_summary",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "chat_messages",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "chat_messages",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "scheduled_at",
              "type": "dateTime",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "scheduled_at",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "appointment_id",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "appointment_id",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "last_message_at",
              "type": "dateTime",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "last_message_at",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "last_followup_at",
              "type": "dateTime",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "last_followup_at",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "followup_count",
              "type": "number",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "followup_count",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "assignee",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "assignee",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "session_id"
          ]
        },
        "options": {},
        "operation": "update"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "Und0frCQ6SNVX3VV",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "e1331352-c3da-4586-9d64-4be4dab49748",
      "name": "Cr√©er/Mettre √† jour la session",
      "type": "n8n-nodes-base.airtable",
      "position": [
        2240,
        269
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "list",
          "value": "appO2nHiT9XPuGrjN",
          "cachedResultUrl": "https://airtable.com/appO2nHiT9XPuGrjN",
          "cachedResultName": "Twilio-Scheduling-Agent"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblokH7uw63RpIlQ0",
          "cachedResultUrl": "https://airtable.com/appO2nHiT9XPuGrjN/tblokH7uw63RpIlQ0",
          "cachedResultName": "Lead Tracker"
        },
        "columns": {
          "value": {
            "session_id": "={{ $('Twilio Trigger').item.json.From }}",
            "scheduled_at": "={{\n$('Appointment Scheduling Agent').item.json.output.has_appointment_scheduled\n  ? $('Appointment Scheduling Agent').item.json.output.appointment.scheduled_at\n  : (\n    $('Get Existing Chat Session').item.json.isNotEmpty()\n    ? $('Get Existing Chat Session').item.json.scheduled_at\n    : $now.toISO()\n  )\n}}",
            "chat_messages": "={{\nJSON.stringify(\n  ($('Get Existing Chat Session').item.json.chat_messages ? JSON.parse($('Get Existing Chat Session').item.json.chat_messages) : [])\n  .concat(\n    { \"role\": \"human\", \"message\": $('Twilio Trigger').item.json.Body },\n    { \"role\": \"assistant\", \"message\": $('Appointment Scheduling Agent').item.json.output.reply }\n  )\n)\n}}",
            "customer_name": "={{\n  !$('Get Existing Chat Session').item.json.customer_name &&\n  $('Appointment Scheduling Agent').item.json.output.customer_name\n    ? $('Appointment Scheduling Agent').item.json.output.customer_name\n    : ($('Get Existing Chat Session').item.json.customer_name ?? '')\n}}",
            "appointment_id": "={{\n$('Appointment Scheduling Agent').item.json.output.has_appointment_scheduled\n  ? $('Appointment Scheduling Agent').item.json.output.appointment.appointment_id\n  : (\n    $('Get Existing Chat Session').item.json.isNotEmpty()\n    ? $('Get Existing Chat Session').item.json.appointment_id\n    : ''\n  )\n}}",
            "followup_count": "={{\n  !$('Get Existing Chat Session').item.json.followup_count\n  ? 0\n  : $('Get Existing Chat Session').item.json.followup_count\n}}",
            "last_message_at": "={{ $now.toISO() }}",
            "customer_summary": "={{\n  !$('Get Existing Chat Session').item.json.appointment_id\n  && $('Appointment Scheduling Agent').item.json.output.has_appointment_scheduled\n    ? $json.output.enquiry_summary\n    : $('Get Existing Chat Session').item.json.customer_summary\n}}",
            "last_followup_at": "={{\n  !$('Get Existing Chat Session').item.json.last_followup_at\n  ? $now.toISO()\n  : $('Get Existing Chat Session').item.json.last_followup_at\n}}",
            "twilio_service_number": "={{ $('Twilio Trigger').item.json.To }}"
          },
          "schema": [
            {
              "id": "id",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": true,
              "required": false,
              "displayName": "id",
              "defaultMatch": true
            },
            {
              "id": "session_id",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "session_id",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "status",
              "type": "options",
              "display": true,
              "options": [
                {
                  "name": "ACTIVE",
                  "value": "ACTIVE"
                },
                {
                  "name": "STOP",
                  "value": "STOP"
                }
              ],
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "customer_name",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "customer_name",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "customer_summary",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "customer_summary",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "chat_messages",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "chat_messages",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "scheduled_at",
              "type": "dateTime",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "scheduled_at",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "appointment_id",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "appointment_id",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "last_message_at",
              "type": "dateTime",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "last_message_at",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "last_followup_at",
              "type": "dateTime",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "last_followup_at",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "followup_count",
              "type": "number",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "followup_count",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "assignee",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "assignee",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "twilio_service_number",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "twilio_service_number",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "session_id"
          ]
        },
        "options": {},
        "operation": "update"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "Und0frCQ6SNVX3VV",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "de8eaa46-2fe8-4afd-a400-9c528f578d24",
      "name": "Obtenir la session de chat existante",
      "type": "n8n-nodes-base.airtable",
      "position": [
        740,
        240
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "list",
          "value": "appO2nHiT9XPuGrjN",
          "cachedResultUrl": "https://airtable.com/appO2nHiT9XPuGrjN",
          "cachedResultName": "Twilio-Scheduling-Agent"
        },
        "limit": 1,
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblokH7uw63RpIlQ0",
          "cachedResultUrl": "https://airtable.com/appO2nHiT9XPuGrjN/tblokH7uw63RpIlQ0",
          "cachedResultName": "Lead Tracker"
        },
        "options": {},
        "operation": "search",
        "returnAll": false,
        "filterByFormula": "={session_id}=\"{{ $('Twilio Trigger').item.json.From }}\""
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "Und0frCQ6SNVX3VV",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1,
      "alwaysOutputData": true
    },
    {
      "id": "16aabbf0-fdf7-4940-a3a3-962e0b877299",
      "name": "Toutes les 24 heures",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        220,
        1160
      ],
      "parameters": {
        "rule": {
          "interval": [
            {}
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "9471b840-3a59-491d-a309-180d5a69fb7e",
      "name": "Envoyer la r√©ponse",
      "type": "n8n-nodes-base.twilio",
      "position": [
        2420,
        269
      ],
      "parameters": {
        "to": "={{ $('Twilio Trigger').item.json.From }}",
        "from": "={{ $('Twilio Trigger').item.json.To }}",
        "message": "={{ $('Appointment Scheduling Agent').item.json.output.reply }}",
        "options": {}
      },
      "credentials": {
        "twilioApi": {
          "id": "TJv4H4lXxPCLZT50",
          "name": "Twilio account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "601aa9ea-f3f4-49bd-a391-84e32c47f7ba",
      "name": "Envoyer la confirmation",
      "type": "n8n-nodes-base.twilio",
      "position": [
        900,
        -280
      ],
      "parameters": {
        "to": "={{ $('Twilio Trigger').item.json.From }}",
        "from": "={{ $('Twilio Trigger').item.json.To }}",
        "message": "Merci. Vous ne recevrez plus aucun message de notre part !",
        "options": {}
      },
      "credentials": {
        "twilioApi": {
          "id": "TJv4H4lXxPCLZT50",
          "name": "Twilio account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "a8b9fffe-f814-4cb4-9e1a-bf7eb57e7afd",
      "name": "Demande utilisateur STOP",
      "type": "n8n-nodes-base.airtable",
      "position": [
        660,
        -280
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "list",
          "value": "appO2nHiT9XPuGrjN",
          "cachedResultUrl": "https://airtable.com/appO2nHiT9XPuGrjN",
          "cachedResultName": "Twilio-Scheduling-Agent"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblokH7uw63RpIlQ0",
          "cachedResultUrl": "https://airtable.com/appO2nHiT9XPuGrjN/tblokH7uw63RpIlQ0",
          "cachedResultName": "Lead Tracker"
        },
        "columns": {
          "value": {
            "status": "STOP",
            "session_id": "={{ $('Twilio Trigger').item.json.From }}"
          },
          "schema": [
            {
              "id": "id",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": true,
              "required": false,
              "displayName": "id",
              "defaultMatch": true
            },
            {
              "id": "session_id",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "session_id",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "status",
              "type": "options",
              "display": true,
              "options": [
                {
                  "name": "ACTIVE",
                  "value": "ACTIVE"
                },
                {
                  "name": "STOP",
                  "value": "STOP"
                }
              ],
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "chat_messages",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "chat_messages",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "scheduled_at",
              "type": "dateTime",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "scheduled_at",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "last_message_at",
              "type": "dateTime",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "last_message_at",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "last_followup_at",
              "type": "dateTime",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "last_followup_at",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "followup_count",
              "type": "number",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "followup_count",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "assignee",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "assignee",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "session_id"
          ]
        },
        "options": {},
        "operation": "update"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "Und0frCQ6SNVX3VV",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "3e7797f0-5449-404c-bac9-e0019223cea8",
      "name": "V√©rifier les mots de commande",
      "type": "n8n-nodes-base.switch",
      "position": [
        295,
        180
      ],
      "parameters": {
        "rules": {
          "values": [
            {
              "outputKey": "STOP",
              "conditions": {
                "options": {
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "operator": {
                      "type": "string",
                      "operation": "contains"
                    },
                    "leftValue": "={{ $json.Body }}",
                    "rightValue": "STOP"
                  }
                ]
              },
              "renameOutput": true
            }
          ]
        },
        "options": {
          "fallbackOutput": "extra"
        }
      },
      "typeVersion": 3
    },
    {
      "id": "e636ebb5-16c6-43ef-9fee-fe2b9a8c95a9",
      "name": "Analyseur de sortie structur√©e",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        1960,
        560
      ],
      "parameters": {
        "jsonSchemaExample": "{\n    \"reply\": \"\",\n    \"customer_name\": \"\",\n    \"enquiry_summary\": \"\",\n\t\"has_appointment_scheduled\": false,\n    \"appointment\": {\n      \"appointment_id\": \"\",\n      \"scheduled_at\": \"\"\n    }\n}"
      },
      "typeVersion": 1.2
    },
    {
      "id": "3469740d-bd2f-4d34-a86b-59b088917d74",
      "name": "Analyseur de sortie √† correction automatique",
      "type": "@n8n/n8n-nodes-langchain.outputParserAutofixing",
      "position": [
        1820,
        440
      ],
      "parameters": {},
      "typeVersion": 1
    },
    {
      "id": "fc0adfdf-724c-45d2-84f6-cb2b43254cc0",
      "name": "Mod√®le de chat OpenAI2",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        1840,
        560
      ],
      "parameters": {
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "8gccIjcuf3gvaoEr",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "0e0d8236-0f10-4f8f-88c1-bba2ef084e90",
      "name": "Note adh√©sive3",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1080,
        -50.317404874203476
      ],
      "parameters": {
        "color": 7,
        "width": 1011.8938194478603,
        "height": 917.533068142247,
        "content": "## √âtape 3. Prise de rendez-vous avec l'IA\n[En savoir plus sur l'utilisation des agents IA](https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent)\n\nUtiliser un agent IA est un moyen puissant de simplifier et d'am√©liorer les workflows en utilisant les derni√®res technologies en mati√®re d'IA. Notre agent de prise de rendez-vous est √©quip√© pour converser avec le client et dispose de tous les outils n√©cessaires pour planifier, reprogrammer et annuler des rendez-vous.\n\nGr√¢ce au n≈ìud **HTTP Tool**, il est facile de se connecter aux services API tiers pour effectuer des actions. Dans ce workflow, nous appelons l'API Cal.com pour g√©rer les √©v√©nements de planification."
      },
      "typeVersion": 1
    },
    {
      "id": "380b437e-fa29-4ebb-bebd-1984d371bc93",
      "name": "Note adh√©sive4",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        549.8696404310444,
        -49.46972087742148
      ],
      "parameters": {
        "color": 7,
        "width": 504.0066355303578,
        "height": 557.8466102697549,
        "content": "## √âtape 2. V√©rifier l'historique de chat existant\n[En savoir plus sur l'utilisation d'Airtable](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.airtable)\n\nNous utilisons Airtable pour la gestion des sessions clients et pour capturer l'historique des discussions. Airtable est un choix id√©al car il agit comme une base de donn√©es persistante avec une API flexible qui pourrait s'av√©rer essentielle pour une extension future.\n\nNous r√©cup√©rerons tout historique de chat pr√©c√©dent et le transmettrons √† notre agent pour poursuivre la conversation."
      },
      "typeVersion": 1
    },
    {
      "id": "f89762f5-8520-4af6-987d-a71381c603e3",
      "name": "Note adh√©sive5",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        0,
        -52.79744987055557
      ],
      "parameters": {
        "color": 7,
        "width": 523.6927529886705,
        "height": 479.4432905734608,
        "content": "## √âtape 1. Attendre le SMS du client\n[En savoir plus sur le d√©clencheur Twilio](https://docs.n8n.io/integrations/builtin/trigger-nodes/n8n-nodes-base.twiliotrigger)\n\nPour ce workflow, nous utiliserons le d√©clencheur SMS Twilio pour recevoir les demandes des clients souhaitant r√©server une r√©paration de PC ou d'ordinateur portable.\n\nPuisque nous travaillerons avec des SMS, nous effectuerons une v√©rification pour voir si le client souhaite STOPPER tout message de suivi suppl√©mentaire. C'est une √©tape optionnelle que nous aborderons plus tard."
      },
      "typeVersion": 1
    },
    {
      "id": "de525648-ef11-4b48-85ea-c6e5463c87cf",
      "name": "Note Autocollante6",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        540,
        -450.0217713292123
      ],
      "parameters": {
        "color": 7,
        "width": 563.7797724327219,
        "height": 358.6710117357418,
        "content": "## √âtape 9. Annulation des messages de relance\n\nSi le client envoie le mot STOP au bot, nous mettrons √† jour notre fiche client dans Airtable, ce qui emp√™chera le d√©clenchement de relances suppl√©mentaires. Un message de confirmation est ensuite envoy√© au client."
      },
      "typeVersion": 1
    },
    {
      "id": "028e4253-d1e6-4cf8-b181-ba27b03fa66e",
      "name": "Note Autocollante7",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2120,
        -40
      ],
      "parameters": {
        "color": 7,
        "width": 521.5259177258192,
        "height": 558.7093446159199,
        "content": "## √âtape 4. Mise √† jour d'Airtable et r√©ponse au client\n[En savoir plus sur l'utilisation de Twilio](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.twilio)\n\nUne fois que l'agent a formul√© une r√©ponse, nous pouvons mettre √† jour notre tableau de rendez-vous en cons√©quence, garantissant que la conversation √† chaque √©tape est bien enregistr√©e.\n\nSi aucun rendez-vous n'est programm√©, nous pouvons passer √† la seconde moiti√© de ce workflow qui traite du suivi des clients potentiels et de leurs demandes."
      },
      "typeVersion": 1
    },
    {
      "id": "f321ded9-c5d3-418d-bf1c-e29bf9845098",
      "name": "Note Autocollante8",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        20,
        940
      ],
      "parameters": {
        "color": 7,
        "width": 509.931737588259,
        "height": 433.74984757777247,
        "content": "## √âtape 5. Suivi des demandes ouvertes\n[En savoir plus sur l'utilisation du d√©clencheur programm√©](https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.scheduletrigger)\n\nLa seconde moiti√© de ce workflow consiste √† identifier les clients qui ont interagi avec notre chatbot mais qui n'ont pas encore confirm√© de rendez-vous. Nous avons l'intention d'envoyer un message de relance demandant si la demande est toujours valide et encourageant la prise de rendez-vous avec le client."
      },
      "typeVersion": 1
    },
    {
      "id": "4485e39a-3e84-49ee-9d3f-a271a98a330a",
      "name": "Note Autocollante1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1000,
        940
      ],
      "parameters": {
        "color": 7,
        "width": 567.1169284476533,
        "height": 601.5572296901626,
        "content": "## √âtape 7. G√©n√©ration d'un message de relance\n[En savoir plus sur Basic LLM Chain](https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.chainllm)\n\nAvec notre session et l'historique du chat r√©cup√©r√©s depuis Airtable, nous pouvons simplement demander √† notre IA de g√©n√©rer un message de relance bien formul√© pour r√©engager le client.\n\nLorsque la logique est lin√©aire, la cha√Æne Basic LLM convient √† de nombreux workflows. Un agent n'est pas toujours n√©cessaire !"
      },
      "typeVersion": 1
    },
    {
      "id": "f2d66e44-cf18-4e8f-80d5-e8d03e10e5ff",
      "name": "G√©n√©rer un message de relance",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "position": [
        1140,
        1200
      ],
      "parameters": {
        "text": "=",
        "messages": {
          "messageValues": [
            {
              "message": "=Vous √™tes un assistant de prise de rendez-vous pour les r√©parations de PC et ordinateurs portables pour une entreprise appel√©e \"PC Parts Ltd\". Vous devez vous r√©f√©rer √† vous-m√™me comme \"l'√©quipe de service\". Vous avez eu une conversation avec un client le {{ $json.last_message_at }} mais la demande ne s'est pas termin√©e par la prise d'un rendez-vous.\n{{ $json.last_followup_at ? `Vous avez envoy√© un dernier message de relance le ${$json.last_followup_at}` : '' }}.\n\nVotre t√¢che est de demander si le client potentiel souhaite poursuivre la demande en utilisant les informations suivantes pour construire un message de relance pertinent. Essayez d'inciter l'utilisateur √† continuer la conversation et finalement √† prendre un rendez-vous.\n\n## √Ä propos du client\nnom : {{ $json.customer_name ?? '<inconnu>' }}\nr√©sum√© de la demande : {{ $json.customer_summary ?? '<inconnu>' }}\n\n# Conversation existante\nVoici les logs du chat de la conversation existante :\n{{ $json.chat_messages }}"
            }
          ]
        },
        "promptType": "define"
      },
      "typeVersion": 1.4
    },
    {
      "id": "0b93a300-b9ab-4c28-8ac0-fddc49247b74",
      "name": "Note Autocollante2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1600,
        940
      ],
      "parameters": {
        "color": 7,
        "width": 496.0833287715134,
        "height": 526.084030034264,
        "content": "## √âtape 8. Mettre √† jour les propri√©t√©s de suivi et envoyer le message\n[En savoir plus sur l'utilisation de Twilio](https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.twilio/)\n\nEnfin, nous mettrons √† jour notre activit√© de suivi dans le cadre du dossier client dans Airtable. Suivre le nombre de fois o√π nous relan√ßons aide √† √©viter de spammer inutilement le client.\n\nLe message de suivi est envoy√© via Twilio et inclut une instruction pour d√©sactiver les messages de suivi suppl√©mentaires en utilisant le mot-cl√© STOP."
      },
      "typeVersion": 1
    },
    {
      "id": "0e022485-9504-416a-8632-edd65df29bf4",
      "name": "Note Autocollante9",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -480,
        -80
      ],
      "parameters": {
        "width": 437.0019498737189,
        "height": 511.67220311821393,
        "content": "## Essayez-le !\n\n### Ce workflow met en ≈ìuvre un chatbot de prise de rendez-vous aliment√© par un agent d'outils IA.\n* Le workflow est d√©clench√© par des demandes clients envoy√©es par SMS\n* La gestion des sessions clients et l'historique des conversations sont enregistr√©s dans Airtable pour permettre la conversation SMS.\n* Un agent IA est √©quip√© pour r√©pondre √† toutes les questions ainsi que pour planifier, reprogrammer et annuler des rendez-vous au nom du client.\n* La r√©ponse de l'agent est renvoy√©e au client par SMS.\n* Un syst√®me de suivi suppl√©mentaire est mis en place pour relancer les clients qui n'ont pas pris rendez-vous.\n\n \n### Besoin d'aide ?\nRejoignez le [Discord](https://discord.com/invite/XPKeKXeB7d) ou posez vos questions sur le [Forum](https://community.n8n.io/) !\n\nBon hacking !"
      },
      "typeVersion": 1
    },
    {
      "id": "04681629-0221-47fe-b992-0d5791995523",
      "name": "Mod√®le de Chat OpenAI3",
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "position": [
        1120,
        420
      ],
      "parameters": {
        "model": "gpt-4o-mini",
        "options": {}
      },
      "credentials": {
        "openAiApi": {
          "id": "8gccIjcuf3gvaoEr",
          "name": "OpenAi account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "7633e3b0-daf3-495d-bcd7-ce0db24a73b9",
      "name": "Obtenir la disponibilit√©",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        1260,
        440
      ],
      "parameters": {
        "url": "https://api.cal.com/v2/slots/available",
        "sendQuery": true,
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "parametersQuery": {
          "values": [
            {
              "name": "eventTypeId",
              "value": "={{ 648297 }}",
              "valueProvider": "fieldValue"
            },
            {
              "name": "startTime",
              "value": "{startTime}",
              "valueProvider": "fieldValue"
            },
            {
              "name": "endTime",
              "value": "{endTime}",
              "valueProvider": "fieldValue"
            }
          ]
        },
        "toolDescription": "Appelez cet outil pour obtenir la disponibilit√© des rendez-vous. Les dates peuvent varier mais les heures sont fixes - startTime doit toujours √™tre 9h et endTime doit √™tre 19h. Utilisez strictement le format ISO pour les dates par exemple \"2024-01-01T09:00:00-00:00\". Exemple de sch√©ma d'entr√©e : ```{ \"startTime\": \"...\", \"endTime\": \"...\"}```",
        "placeholderDefinitions": {
          "values": [
            {
              "name": "startTime",
              "type": "string",
              "description": "start of daterange in ISO format. eg. 2024-01-01T09:00:00-00:00"
            },
            {
              "name": "endTime",
              "type": "string",
              "description": "end of daterange in ISO format. eg. 2024-01-01T09:00:00-00:00"
            }
          ]
        }
      },
      "credentials": {
        "calApi": {
          "id": "GPSKPrBhO3Pq6KVF",
          "name": "Cal account"
        },
        "httpHeaderAuth": {
          "id": "X2Vr2TQSBcOsOMst",
          "name": "Cal.com API v2"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "0f814d08-218e-492e-b1f8-63985d583e80",
      "name": "Obtenir une r√©servation existante",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        1560,
        440
      ],
      "parameters": {
        "url": "https://api.cal.com/v2/bookings/{bookingUid}",
        "sendHeaders": true,
        "authentication": "predefinedCredentialType",
        "toolDescription": "Appelez cet outil pour obtenir une r√©servation existante en utilisant un \"uid\" de r√©servation.",
        "parametersHeaders": {
          "values": [
            {
              "name": "cal-api-version",
              "value": "2024-08-13",
              "valueProvider": "fieldValue"
            }
          ]
        },
        "nodeCredentialType": "calApi",
        "placeholderDefinitions": {
          "values": [
            {
              "name": "bookingUid",
              "type": "string",
              "description": "the uid of the booking (note: this is not the same as the id of the booking)"
            }
          ]
        }
      },
      "credentials": {
        "calApi": {
          "id": "GPSKPrBhO3Pq6KVF",
          "name": "Cal account"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "36a5a2a7-bb78-4091-8b25-5e9f49628542",
      "name": "Trouver une r√©servation existante",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        1700,
        440
      ],
      "parameters": {
        "url": "https://api.cal.com/v2/bookings",
        "jsonQuery": "{\n  \"status\": \"upcoming\",\n  \"attendeeEmail\": \"{attendee_email}\",\n  \"afterStart\": \"{date}\"\n}",
        "sendQuery": true,
        "sendHeaders": true,
        "specifyQuery": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "toolDescription": "Appelez cet outil pour rechercher une r√©servation existante avec l'adresse e-mail de l'utilisateur et la date. Utilisez le champ \"uid\" dans les r√©sultats comme identifiant principal de la r√©servation, ignorez le champ \"id\".",
        "parametersHeaders": {
          "values": [
            {
              "name": "cal-api-version",
              "value": "2024-08-13",
              "valueProvider": "fieldValue"
            }
          ]
        },
        "placeholderDefinitions": {
          "values": [
            {
              "name": "attendee_email",
              "type": "string",
              "description": "email address of attendee"
            },
            {
              "name": "date",
              "description": "Filter bookings with start after this date string. The time is always fixed at 9am."
            }
          ]
        }
      },
      "credentials": {
        "calApi": {
          "id": "GPSKPrBhO3Pq6KVF",
          "name": "Cal account"
        },
        "httpHeaderAuth": {
          "id": "X2Vr2TQSBcOsOMst",
          "name": "Cal.com API v2"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "88ee279d-ed85-4dc6-b42a-5e1e50f3d708",
      "name": "Reprogrammer la r√©servation",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        1560,
        620
      ],
      "parameters": {
        "url": "https://api.cal.com/v2/bookings/{bookingUid}/reschedule",
        "method": "POST",
        "jsonBody": "{\n  \"start\": \"{start}\",\n  \"reschedulingReason\": \"{reschedulingReason}\"\n}",
        "sendBody": true,
        "sendHeaders": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "toolDescription": "Appelez cet outil pour reprogrammer la r√©servation d'un utilisateur en utilisant un \"uid\" de r√©servation.",
        "parametersHeaders": {
          "values": [
            {
              "name": "cal-api-version",
              "value": "2024-08-13",
              "valueProvider": "fieldValue"
            }
          ]
        },
        "placeholderDefinitions": {
          "values": [
            {
              "name": "bookingUid",
              "type": "string",
              "description": "the uid of the booking. Note this is not the same as the id of the booking."
            },
            {
              "name": "start",
              "type": "string",
              "description": "start datetime of the appointment, for example: \"2024-05-30T12:00:00.000Z\""
            },
            {
              "name": "reschedulingReason",
              "type": "string",
              "description": "Reason for rescheduling the booking. If not given, value is \"Declined to give reason.\""
            }
          ]
        }
      },
      "credentials": {
        "calApi": {
          "id": "GPSKPrBhO3Pq6KVF",
          "name": "Cal account"
        },
        "httpHeaderAuth": {
          "id": "X2Vr2TQSBcOsOMst",
          "name": "Cal.com API v2"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "ee30c793-d8f4-4e49-9bd1-70e5ac109b68",
      "name": "Annuler la r√©servation",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        1700,
        620
      ],
      "parameters": {
        "url": "https://api.cal.com/v2/bookings/{bookingUid}/cancel",
        "method": "POST",
        "jsonBody": "{\n  \"cancellationReason\": \"{cancellationReason}\"\n}",
        "sendBody": true,
        "sendHeaders": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "toolDescription": "Appelez cet outil pour annuler la r√©servation existante d'un utilisateur en utilisant un \"uid\" de r√©servation.",
        "parametersHeaders": {
          "values": [
            {
              "name": "cal-api-version",
              "value": "2024-08-13",
              "valueProvider": "fieldValue"
            }
          ]
        },
        "placeholderDefinitions": {
          "values": [
            {
              "name": "bookingUid",
              "type": "string",
              "description": "the uid of the booking. Note this is not the same as the id of the booking."
            },
            {
              "name": "cancellationReason",
              "type": "string",
              "description": "Reason for cancelling the appointment"
            }
          ]
        }
      },
      "credentials": {
        "calApi": {
          "id": "GPSKPrBhO3Pq6KVF",
          "name": "Cal account"
        },
        "httpHeaderAuth": {
          "id": "X2Vr2TQSBcOsOMst",
          "name": "Cal.com API v2"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "d90aa957-30d7-4b29-93b9-acdc86f1cb17",
      "name": "Cr√©er une r√©servation",
      "type": "@n8n/n8n-nodes-langchain.toolHttpRequest",
      "position": [
        1400,
        440
      ],
      "parameters": {
        "url": "https://api.cal.com/v2/bookings",
        "method": "POST",
        "jsonBody": "{\n  \"eventTypeId\": 648297,\n  \"start\": \"{start}\",\n  \"attendee\": {\n     \"name\": \"{attendee_name}\",\n     \"email\": \"{attendee_email}\",\n     \"timeZone\": \"{attendee_timezone}\"\n  },\n  \"bookingFieldsResponses\": {\n    \"title\": \"{summary_of_enquiry}\"\n  }\n}",
        "sendBody": true,
        "sendHeaders": true,
        "specifyBody": "json",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpHeaderAuth",
        "toolDescription": "Appelez cet outil pour cr√©er une r√©servation. Utilisez strictement le format ISO pour les dates, par exemple \"2024-01-01T09:00:00-00:00\" pour la compatibilit√© avec l'API.",
        "parametersHeaders": {
          "values": [
            {
              "name": "Content-Type",
              "value": "application/json",
              "valueProvider": "fieldValue"
            },
            {
              "name": "cal-api-version",
              "value": "2024-08-13",
              "valueProvider": "fieldValue"
            }
          ]
        },
        "placeholderDefinitions": {
          "values": [
            {
              "name": "start",
              "type": "string",
              "description": "The start time of the booking in ISO format. eg. \"2024-01-01T09:00:00Z\""
            },
            {
              "name": "attendee_name",
              "type": "string",
              "description": "Name of the attendee"
            },
            {
              "name": "attendee_email",
              "type": "string",
              "description": "email of the attendee"
            },
            {
              "name": "attendee_timezone",
              "type": "string",
              "description": "If timezone is unknown, assume Europe/London."
            },
            {
              "name": "summary_of_enquiry",
              "type": "string",
              "description": "short summary of the enquiry or purpose of the meeting"
            }
          ]
        }
      },
      "credentials": {
        "calApi": {
          "id": "GPSKPrBhO3Pq6KVF",
          "name": "Cal account"
        },
        "httpHeaderAuth": {
          "id": "X2Vr2TQSBcOsOMst",
          "name": "Cal.com API v2"
        }
      },
      "typeVersion": 1
    },
    {
      "id": "dfcf00ca-8fe1-4517-b64f-fbb4606ab221",
      "name": "Note adh√©sive10",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        928.7527821891895,
        600
      ],
      "parameters": {
        "color": 7,
        "width": 261.1134437946252,
        "height": 168.99242033383513,
        "content": "![alt](https://upload.wikimedia.org/wikipedia/commons/a/a5/Cal.com%2C_Inc._Logo.svg#100x80)\nVous devrez configurer un identifiant d'authentification personnalis√© dans l'en-t√™te pour l'API Cal.com v2. Consultez la documentation suivante pour plus d'informations : https://cal.com/docs/api-reference/v2/introduction"
      },
      "typeVersion": 1
    },
    {
      "id": "e743b324-ead2-47f8-87c9-2eb969305d4e",
      "name": "Note adh√©sive12",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1220,
        420
      ],
      "parameters": {
        "width": 301.851426117099,
        "height": 360.9218237282627,
        "content": "\n\n\n\n\n\n\n\n\n\n\n\n\n### üö® Changez EventTypeID ici !\n* EventTypeID doit √™tre un nombre.\n* Votre type d'√©v√©nement d√©termine la dur√©e autoris√©e de la r√©servation.\n* Si le type d'√©v√©nement est r√©gl√© sur 30 minutes et que l'agent tente de r√©server 60 minutes, cela √©chouera, assurez-vous donc que l'agent sait combien de temps doit durer la r√©servation !"
      },
      "typeVersion": 1
    },
    {
      "id": "f087e1a4-fffb-44da-afd6-a6277aef84b5",
      "name": "Agent de planification de rendez-vous1",
      "type": "@n8n/n8n-nodes-langchain.agent",
      "position": [
        1220,
        200
      ],
      "parameters": {
        "options": {
          "systemMessage": "=Vous √™tes un assistant de prise de rendez-vous pour une entreprise appel√©e \"PC Parts Ltd\".\n\nLes clients vous enverront des messages pour des demandes de r√©paration de PC ou d'ordinateur portable et votre t√¢che est de planifier une session de r√©paration pour l'utilisateur. Ce r√¥le est strictement destin√© √† aider √† la prise de rendez-vous, donc :\n* vous pouvez r√©pondre aux questions relatives √† l'entreprise \"PC Parts Ltd\".\n* vous ne pouvez pas r√©pondre aux questions relatives aux concurrents de \"PC Parts Ltd\".\n* vous pouvez r√©pondre aux questions relatives √† la r√©paration g√©n√©rale de PC ou d'ordinateur portable d'un point de vue non technique.\n* vous ne pouvez pas aider le client √† diagnostiquer ou assister dans le d√©pannage ou le d√©bogage de ses probl√®mes de PC ou d'ordinateur portable.\n\nSi le client demande, orientez-le vers la prise de rendez-vous o√π un professionnel adapt√© de PC Parts Ltd pourra l'aider.\n* Si un rendez-vous est programm√© pour l'utilisateur, la conversation est termin√©e et vous ne devez pas continuer √† demander √† l'utilisateur de prendre un rendez-vous.\n* Si un rendez-vous est programm√© pour l'utilisateur, celui-ci peut demander les actions suivantes : demander des d√©tails sur le rendez-vous existant, reprogrammer le rendez-vous existant ou annuler un rendez-vous existant.\n* Si un rendez-vous est programm√© pour l'utilisateur, celui-ci ne peut pas prendre un autre rendez-vous tant que le rendez-vous existant n'est pas annul√©.\n\n## √Ä propos de l'entreprise\nPC Parts Ltd est bas√©e √† Londres, Royaume-Uni. Elle propose la r√©paration d'ordinateurs de bureau et portables grand public et pour petites entreprises, allant de l'entr√©e de gamme au haut de gamme. Elle offre √©galement des machines personnalis√©es, notamment pour le gaming. Une promotion estivale est actuellement en cours avec une remise de 20 % sur une s√©lection de machines pour les r√©parations. L'entreprise ne r√©pare pas d'autres appareils √©lectroniques tels que les t√©l√©phones, tablettes ou moniteurs.\n\n## √Ä propos des rendez-vous\nCommencez toujours votre conversation en demandant poliment si l'utilisateur souhaite prendre un nouveau rendez-vous ou se renseigner sur un rendez-vous existant. La date et l'heure actuelles sont {{ $now.toISO() }}. Toutes les dates doivent √™tre donn√©es au format ISO. Chaque rendez-vous doit avoir une date et une heure de d√©but et de fin relatives √† la date d'aujourd'hui dans le futur et doit √™tre pr√©vu pour 30 minutes.\n\n## Pour prendre un rendez-vous\n* Avant de prendre un rendez-vous, demandez si l'utilisateur a d√©j√† un rendez-vous existant.\n* Assurez-vous d'avoir l'adresse e-mail de l'utilisateur, son nom complet, la date propos√©e et l'heure de d√©but pr√©f√©r√©e avant de prendre un rendez-vous.\n* V√©rifiez toujours la disponibilit√© du calendrier pour la date et l'heure propos√©es par l'utilisateur. S'il n'y a pas de disponibilit√©, sugg√©rez le prochain cr√©neau de rendez-vous disponible.\n* Si la prise de rendez-vous est r√©ussie, informez l'utilisateur qu'une confirmation par e-mail sera envoy√©e √† l'adresse e-mail fournie.\n* Si la prise de rendez-vous √©choue, informez l'utilisateur que vous ne pouvez pas traiter sa demande pour le moment et qu'il doit r√©essayer plus tard.\n\n## Pour trouver un rendez-vous existant\n* Demandez √† l'utilisateur son adresse e-mail et la date de la r√©servation existante\n* Utilisez l'e-mail de l'utilisateur et la date pour rechercher la r√©servation existante.\n* Si l'e-mail de l'utilisateur et la date ne correspondent pas aux r√©sultats ou si aucun r√©sultat n'est retourn√©, alors la r√©servation existante n'est pas trouv√©e.\n* Si la r√©servation existante n'est pas trouv√©e, informez l'utilisateur et sugg√©rez qu'une nouvelle r√©servation soit effectu√©e.\n* Lorsque la r√©servation existante est trouv√©e, assurez-vous de lui communiquer le champ UID de la r√©servation.\n\n# Pour reprogrammer ou annuler un rendez-vous existant\n* Trouvez d'abord le rendez-vous existant afin d'obtenir l'UID de r√©servation du rendez-vous existant.\n* Affichez cet UID de r√©servation √† l'utilisateur.\n* Utilisez cet UID de r√©servation pour reprogrammer ou annuler un rendez-vous existant.\n* Si aucun ID de rendez-vous existant n'est trouv√© ou fourni, informez l'utilisateur qu'il n'est pas possible de traiter sa demande pour le moment et qu'il doit contacter par e-mail.\n* lorsque l'utilisateur souhaite annuler un rendez-vous, demandez une raison de l'annulation et sugg√©rez la reprogrammation comme alternative. Confirmez avec l'utilisateur avant d'annuler un rendez-vous.\n\n## √Ä propos de l'utilisateur\n* L'identifiant de session du client est \"{{ $('Twilio Trigger').item.json.From }}\"\n{{\n$json.chat_messages \n  ? '* Il s\\'agit d\\'un client potentiel revenant.' \n  : '* Il s\\'agit d\\'un nouveau client. Demandez les d√©tails de sa demande.'\n}}\n{{\n$json.appointment_id \n  ? `* Le client a d√©j√† pris rendez-vous le ${$json.scheduled_at} et son identifiant de rendez-vous est ${$json.appointment_id}`\n  : '* Ce client n\\'a pas encore pris de rendez-vous.'\n}}\n\n## Conversation existante\n{{\n$json.chat_messages\n  ? 'Voici les journaux de discussion existants qui doivent √™tre utilis√©s comme contexte pour continuer la conversation :\\n```\\n' + JSON.parse($json.chat_messages).map(item => `${item.role}: ${item.message.replaceAll('\\n', ' ')}`).join('\\n') + '\\n```'\n  : '* Il n\\'y a pas encore de conversation existante.'\n}}"
        },
        "hasOutputParser": true
      },
      "typeVersion": 1.6
    }
  ],
  "pinData": {},
  "connections": {
    "Toutes les 24 heures": {
      "main": [
        [
          {
            "node": "Trouver des candidats pour le suivi",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Annuler la r√©servation": {
      "ai_tool": [
        [
          {
            "node": "Agent de planification de rendez-vous1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "D√©clencheur Twilio": {
      "main": [
        [
          {
            "node": "V√©rifier les mots de commande",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Cr√©er une r√©servation": {
      "ai_tool": [
        [
          {
            "node": "Agent de planification de rendez-vous1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Obtenir la disponibilit√©": {
      "ai_tool": [
        [
          {
            "node": "Agent de planification de rendez-vous1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Demande utilisateur STOP": {
      "main": [
        [
          {
            "node": "Envoyer la confirmation",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mod√®le de Chat OpenAI1": {
      "ai_languageModel": [
        [
          {
            "node": "G√©n√©rer un message de relance",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Mod√®le de chat OpenAI2": {
      "ai_languageModel": [
        [
          {
            "node": "Analyseur de sortie √† correction automatique",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Mod√®le de Chat OpenAI3": {
      "ai_languageModel": [
        [
          {
            "node": "Agent de planification de rendez-vous1",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Reprogrammer la r√©servation": {
      "ai_tool": [
        [
          {
            "node": "Agent de planification de rendez-vous1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Obtenir une r√©servation existante": {
      "ai_tool": [
        [
          {
            "node": "Agent de planification de rendez-vous1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Cr√©er/Mettre √† jour la session": {
      "main": [
        [
          {
            "node": "Envoyer la r√©ponse",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trouver une r√©servation existante": {
      "ai_tool": [
        [
          {
            "node": "Agent de planification de rendez-vous1",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "V√©rifier les mots de commande": {
      "main": [
        [
          {
            "node": "Demande utilisateur STOP",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Obtenir la session de chat existante",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analyseur de sortie structur√©e": {
      "ai_outputParser": [
        [
          {
            "node": "Analyseur de sortie √† correction automatique",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Analyseur de sortie √† correction automatique": {
      "ai_outputParser": [
        [
          {
            "node": "Agent de planification de rendez-vous1",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "Trouver des candidats pour le suivi": {
      "main": [
        [
          {
            "node": "G√©n√©rer un message de relance",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtenir la session de chat existante": {
      "main": [
        [
          {
            "node": "Agent de planification de rendez-vous1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "G√©n√©rer un message de relance": {
      "main": [
        [
          {
            "node": "Mettre √† jour le nombre et la date du suivi",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Agent de planification de rendez-vous1": {
      "main": [
        [
          {
            "node": "Cr√©er/Mettre √† jour la session",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mettre √† jour le nombre et la date du suivi": {
      "main": [
        [
          {
            "node": "Envoyer un message de suivi",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "tags": [
    {
      "id": "1",
      "name": "Audelalia"
    }
  ]
}