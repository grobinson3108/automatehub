{
  "id": "6bMVzmrbPexvBe6q",
  "meta": {
    "instanceId": "558d88703fb65b2d0e44613bc35916258b0f0bf983c5d4730c00c424b77ca36a",
    "templateCredsSetupCompleted": true
  },
  "name": "YouTube vers Airtable Anonyme",
  "tags": [
    {
      "id": "1iR8rLF2nlFdk8Iy",
      "name": "Tool",
      "createdAt": "2025-04-10T20:38:51.198Z",
      "updatedAt": "2025-04-10T20:38:51.198Z"
    },
    {
      "id": "kY9rLUshnq9TIJVU",
      "name": "Freebie",
      "createdAt": "2025-04-11T17:35:46.605Z",
      "updatedAt": "2025-04-11T17:35:46.605Z"
    },
    {
      "id": "1",
      "name": "Audelalia"
    }
  ],
  "nodes": [
    {
      "id": "eb18fe74-8812-48ab-b977-41f5cedf9a76",
      "name": "Obtenir la transcription de la vid√©o",
      "type": "n8n-nodes-base.httpRequest",
      "position": [
        880,
        0
      ],
      "parameters": {
        "url": "https://youtube-video-summarizer-gpt-ai.p.rapidapi.com/api/v1/get-transcript-v2",
        "options": {},
        "sendQuery": true,
        "sendHeaders": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "video_id",
              "value": "={{ $json.videoId }}"
            },
            {
              "name": "platform",
              "value": "youtube"
            }
          ]
        },
        "headerParameters": {
          "parameters": [
            {
              "name": "X-Rapidapi-Key",
              "value": "{YOUR-API-KEY}"
            },
            {
              "name": "X-Rapidapi-Host",
              "value": "youtube-video-summarizer-gpt-ai.p.rapidapi.com"
            }
          ]
        }
      },
      "typeVersion": 4.2
    },
    {
      "id": "7a672f41-646f-46bf-be8b-96a84c1b0dd7",
      "name": "Obtenir l'ID de la vid√©o",
      "type": "n8n-nodes-base.code",
      "position": [
        660,
        0
      ],
      "parameters": {
        "jsCode": "// Loop over input items\nfor (const item of $input.all()) {\n    // Extract the YouTube video ID using a regular expression\n    const Source = item.json.Source;\n    const videoIdMatch = Source.match(/(?:v=|\\/)([a-zA-Z0-9_-]{11})/);\n\n    const videoId = videoIdMatch ? videoIdMatch[1] : null; // Extracted video ID or null if not found\n\n    // Add the video ID to the JSON\n    item.json.videoId = videoId;\n}\n\n// Return all items with the new videoId field\nreturn $input.all();\n"
      },
      "typeVersion": 2
    },
    {
      "id": "4b026bcf-7563-4444-8ce1-9e9a89eef56d",
      "name": "Combiner les transcriptions",
      "type": "n8n-nodes-base.code",
      "position": [
        1320,
        0
      ],
      "parameters": {
        "jsCode": "// Initialize an empty string to hold the concatenated transcript\nlet Transcript = \"\";\n\n// Safeguard against undefined paths and ensure required properties exist\nif ($json.data && $json.data.transcripts) {\n    // Loop through all transcript objects\n    for (const key in $json.data.transcripts) {\n        if ($json.data.transcripts[key].custom) {\n            const customArray = $json.data.transcripts[key].custom;\n\n            // Extract and append text from each transcript entry\n            for (const item of customArray) {\n                if (item.text) {\n                    Transcript += item.text + \" \"; // Add a space between texts\n                }\n            }\n        }\n    }\n}\n\n// Return the combined transcript as a new field\nreturn [\n    {\n        json: {\n            Transcript: Transcript.trim(), // Trim to clean up extra spaces\n        },\n    },\n];\n"
      },
      "typeVersion": 2
    },
    {
      "id": "693ab15f-307e-4fdf-9752-2cc64a80307d",
      "name": "D√©clencheur planifi√©",
      "type": "n8n-nodes-base.scheduleTrigger",
      "position": [
        240,
        0
      ],
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "minutes"
            }
          ]
        }
      },
      "typeVersion": 1.2
    },
    {
      "id": "1df795e2-ac7e-42a8-a1f4-2c292b704613",
      "name": "Airtable",
      "type": "n8n-nodes-base.airtable",
      "position": [
        460,
        0
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "list",
          "value": "appgNpFtbtaGHM4g0",
          "cachedResultUrl": "https://airtable.com/appgNpFtbtaGHM4g0",
          "cachedResultName": "Content Hub"
        },
        "limit": 1,
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblwBVudDpOMkUGKL",
          "cachedResultUrl": "https://airtable.com/appgNpFtbtaGHM4g0/tblwBVudDpOMkUGKL",
          "cachedResultName": "Ideas"
        },
        "options": {},
        "operation": "search",
        "returnAll": false,
        "filterByFormula": "AND(     {Status} = \"\",     {Type} = \"Youtube Video\" )"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "g540vJVYsNT8ZS11",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "8b2cfd44-4897-403c-9393-5cc917baa673",
      "name": "Obtenir la transcription compl√®te",
      "type": "n8n-nodes-base.set",
      "position": [
        1540,
        0
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "2eaa3e02-95f7-47d9-a27d-64974f9c1a7b",
              "name": "Transcript",
              "type": "string",
              "value": "={{ $json.Transcript }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "8ea3c1a7-d428-467f-aff2-9b3f572f911f",
      "name": "Obtenir toutes les transcriptions",
      "type": "n8n-nodes-base.set",
      "position": [
        1100,
        0
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "01fb3072-61c6-47f6-b6dd-7cbf817f5b4a",
              "name": "data.transcripts",
              "type": "object",
              "value": "={{ $json.data.transcripts }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "6cff40d0-18ba-4ae0-a1c9-070d8fb39347",
      "name": "Obtenir l'id√©e principale et les points cl√©s",
      "type": "n8n-nodes-base.set",
      "position": [
        2120,
        0
      ],
      "parameters": {
        "options": {},
        "assignments": {
          "assignments": [
            {
              "id": "e9b7f303-562b-40bd-8c3c-8c7138bd4329",
              "name": "Main Idea",
              "type": "string",
              "value": "={{ $json.output.MainIdea }}"
            },
            {
              "id": "572627f4-b9b3-4c59-a570-5bd810f68825",
              "name": "Key Takeaways",
              "type": "array",
              "value": "={{ $json.output['Key Takeaways'] }}"
            }
          ]
        }
      },
      "typeVersion": 3.4
    },
    {
      "id": "1e71d56b-3140-4dd8-b4d8-cdbe9eb24bde",
      "name": "Extraire un r√©sum√© d√©taill√©",
      "type": "@n8n/n8n-nodes-langchain.informationExtractor",
      "position": [
        1760,
        0
      ],
      "parameters": {
        "text": "=Votre t√¢che est de g√©n√©rer un r√©sum√© d√©taill√© de \"{{ $json.Transcript }}\".\n\nR√©pondez toujours dans le format suivant :\n\n- Id√©e principale\n- Points cl√©s",
        "options": {},
        "schemaType": "fromJson",
        "jsonSchemaExample": "{\n\t\"MainIdea\": \"The video provides a step-by-step guide on how to build an MCP (Model Context Protocol) server to connect agents to various data sources, specifically focusing on retrieving stock prices from Yahoo Finance. It explains the setup process, including creating functions, integrating with agents, and connecting to other tools.\",\n\t\"Key Takeaways\": [\"1. **MCP Overview**: MCP allows AI engineers to define tools once and reuse them across different frameworks, simplifying the integration process. 2. **Building the Server**: The video demonstrates how to create a Python function to fetch stock prices using the Y Finance library, and how to wrap this function into an MCP server. 3. **Testing the Server**: It shows how to use a visual inspector to test the MCP server before deploying it. 4. **Connecting to Agents**: The tutorial covers how to connect the MCP server to agents using HuggingFace's smaller agents library, enabling the retrieval of stock prices through prompts. 5. **Adding More Tools**: Viewers learn how to expand the server's capabilities by adding additional tools for stock information and income statements. 6. **Integration with Other Platforms**: The video explains how to integrate the MCP server with platforms like Cursor and Langflow, showcasing the flexibility of the MCP setup. 7. **Advanced Features**: It touches on additional MCP capabilities such as storing prompts and creating resources for data access, enhancing the server's functionality.\"]\n}"
      },
      "typeVersion": 1
    },
    {
      "id": "942a77e1-5773-4657-a38c-2b1013af6544",
      "name": "Mettre √† jour Airtable",
      "type": "n8n-nodes-base.airtable",
      "position": [
        2320,
        0
      ],
      "parameters": {
        "base": {
          "__rl": true,
          "mode": "list",
          "value": "appgNpFtbtaGHM4g0",
          "cachedResultUrl": "https://airtable.com/appgNpFtbtaGHM4g0",
          "cachedResultName": "Content Hub"
        },
        "table": {
          "__rl": true,
          "mode": "list",
          "value": "tblwBVudDpOMkUGKL",
          "cachedResultUrl": "https://airtable.com/appgNpFtbtaGHM4g0/tblwBVudDpOMkUGKL",
          "cachedResultName": "Ideas"
        },
        "columns": {
          "value": {
            "id": "={{ $('Airtable').item.json.id }}",
            "Status": true,
            "Main Idea": "={{ $json['Main Idea'] }}",
            "Takeaways": "={{ $json['Key Takeaways'] }}"
          },
          "schema": [
            {
              "id": "id",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": true,
              "required": false,
              "displayName": "id",
              "defaultMatch": true
            },
            {
              "id": "Title",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Title",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Description",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Description",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Main Idea",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Main Idea",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Takeaways",
              "type": "string",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Takeaways",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Status",
              "type": "boolean",
              "display": true,
              "removed": false,
              "readOnly": false,
              "required": false,
              "displayName": "Status",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Source",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Source",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Type",
              "type": "options",
              "display": true,
              "options": [
                {
                  "name": "Youtube Video",
                  "value": "Youtube Video"
                },
                {
                  "name": "Web Article",
                  "value": "Web Article"
                },
                {
                  "name": "Own Notes",
                  "value": "Own Notes"
                },
                {
                  "name": "E-Book",
                  "value": "E-Book"
                },
                {
                  "name": "Twitter",
                  "value": "Twitter"
                },
                {
                  "name": "Linkedin",
                  "value": "Linkedin"
                }
              ],
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Type",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Draft",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Draft",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Attachment - Video",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Attachment - Video",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Attachment - Image",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": false,
              "required": false,
              "displayName": "Attachment - Image",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Created",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": true,
              "required": false,
              "displayName": "Created",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            },
            {
              "id": "Last Modified",
              "type": "string",
              "display": true,
              "removed": true,
              "readOnly": true,
              "required": false,
              "displayName": "Last Modified",
              "defaultMatch": false,
              "canBeUsedToMatch": true
            }
          ],
          "mappingMode": "defineBelow",
          "matchingColumns": [
            "id"
          ],
          "attemptToConvertTypes": false,
          "convertFieldsToString": false
        },
        "options": {
          "typecast": true
        },
        "operation": "update"
      },
      "credentials": {
        "airtableTokenApi": {
          "id": "g540vJVYsNT8ZS11",
          "name": "Airtable Personal Access Token account"
        }
      },
      "typeVersion": 2.1
    },
    {
      "id": "4cc08263-7293-4c2b-8684-d15a67a61d33",
      "name": "Note autocollante",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        760,
        -580
      ],
      "parameters": {
        "width": 460,
        "height": 200,
        "content": "## üìù Description\n\nTransformez automatiquement les vid√©os YouTube en id√©es de contenu claires et structur√©es stock√©es dans Airtable. Ce workflow r√©cup√®re les nouveaux liens vid√©o depuis Airtable, extrait les transcriptions via un service RapidAPI, les r√©sume avec votre LLM pr√©f√©r√©, et enregistre l'id√©e principale ainsi que les points cl√©s ‚Äî gardant ainsi votre pipeline de contenu frais avec un minimum d'effort."
      },
      "typeVersion": 1
    },
    {
      "id": "299c6f10-c4a1-4da7-a198-121b054c8882",
      "name": "Note autocollante1",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        760,
        -340
      ],
      "parameters": {
        "width": 460,
        "height": 220,
        "content": "## ‚öôÔ∏è Ce que cela fait\n- **Analyse** Airtable pour de nouveaux liens vid√©o YouTube toutes les 5 minutes..\n- **Extrait** la transcription de la vid√©o en utilisant une API tierce via RapidAPI.\n- **R√©sume** le contenu pour g√©n√©rer une id√©e principale et des points cl√©s.\n- **Met √† jour** l'entr√©e originale dans Airtable avec les insights et la marque comme termin√©e."
      },
      "typeVersion": 1
    },
    {
      "id": "48d11dd7-556d-4154-b580-396c55aa5645",
      "name": "Note autocollante2",
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1300,
        -580
      ],
      "parameters": {
        "width": 500,
        "height": 460,
        "content": "## üß∞ Instructions d'installation\n1. Clonez ce mod√®le dans votre espace de travail n8n.\n2. Ouvrez le n≈ìud Get YouTube Sources et configurez vos identifiants Airtable.\n3. Dans le n≈ìud Get video transcript :\n   - Saisissez votre X-RapidAPI-Key dans les en-t√™tes.\n   - Le point de terminaison de l'API est pr√©configur√©.\n4. Connectez vos identifiants LLM au n≈ìud Extract detailed summary.\n\n5. (Optionnel) Ajustez l'invite de r√©sum√© dans le n≈ìud LangChain pour mieux correspondre √† votre ton.\n6. D√©finissez votre planning pr√©f√©r√© dans le n≈ìud Trigger.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"
      },
      "typeVersion": 1
    }
  ],
  "active": false,
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "1f4b0e52-7589-4c9c-8102-9105e296577b",
  "connections": {
    "Airtable": {
      "main": [
        [
          {
            "node": "Obtenir l'ID de la vid√©o",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtenir l'ID de la vid√©o": {
      "main": [
        [
          {
            "node": "Obtenir la transcription de la vid√©o",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "D√©clencheur planifi√©": {
      "main": [
        [
          {
            "node": "Airtable",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Combiner les transcriptions": {
      "main": [
        [
          {
            "node": "Obtenir la transcription compl√®te",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtenir toutes les transcriptions": {
      "main": [
        [
          {
            "node": "Combiner les transcriptions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtenir la transcription compl√®te": {
      "main": [
        [
          {
            "node": "Extraire un r√©sum√© d√©taill√©",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtenir la transcription de la vid√©o": {
      "main": [
        [
          {
            "node": "Obtenir toutes les transcriptions",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Extraire un r√©sum√© d√©taill√©": {
      "main": [
        [
          {
            "node": "Obtenir l'id√©e principale et les points cl√©s",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Obtenir l'id√©e principale et les points cl√©s": {
      "main": [
        [
          {
            "node": "Mettre √† jour Airtable",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  }
}