# üìã Claude - Guide n8n et Automatisation

## üéØ Contexte et Acc√®s

### Environnement
- **Serveur** : `/var/www/automatehub` 
- **n8n install√©** avec LangChain nodes
- **Acc√®s complet** aux workflows et dossiers
- **Base** : n8n community nodes + n8n-nodes-langchain

### Structure n8n
```
n8n/
‚îú‚îÄ‚îÄ Personal/           # Dossier personnel utilisateur
‚îÇ   ‚îú‚îÄ‚îÄ MasterClass/   # Dossier formation (√† cr√©er)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Module-1-Fondamentaux/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Module-2-Integrations/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Module-3-Business/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Module-4-Avance/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Module-5-Premium/
‚îÇ   ‚îî‚îÄ‚îÄ [autres dossiers...]
‚îî‚îÄ‚îÄ [autres workflows...]
```

## üîß Workflow n8n - Logique de Cr√©ation

### 1. Structure Standard d'un Workflow
```json
{
  "name": "Nom du Workflow",
  "nodes": [
    {
      "parameters": {},
      "id": "uuid-unique",
      "name": "Node Name",
      "type": "n8n-nodes-base.nodeName",
      "typeVersion": 1,
      "position": [x, y]
    }
  ],
  "connections": {
    "Node1": {
      "main": [
        [
          {
            "node": "Node2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {},
  "versionId": "uuid"
}
```

### 2. Nodes LangChain Disponibles
- **LangChain Chat Model** : `@langchain/n8n-nodes-langchain.lmChatOpenAi`
- **LangChain Tool** : `@langchain/n8n-nodes-langchain.toolCode`
- **LangChain Agent** : `@langchain/n8n-nodes-langchain.agentSqlAgent`
- **LangChain Memory** : `@langchain/n8n-nodes-langchain.memoryBufferMemory`
- **LangChain Document** : `@langchain/n8n-nodes-langchain.documentLoader`
- **LangChain Vector Store** : `@langchain/n8n-nodes-langchain.vectorStoreSupabase`

### 3. Nodes n8n Standard Fr√©quents
- **HTTP Request** : `n8n-nodes-base.httpRequest`
- **Set** : `n8n-nodes-base.set`
- **IF** : `n8n-nodes-base.if`
- **Function** : `n8n-nodes-base.function`
- **Schedule Trigger** : `n8n-nodes-base.scheduleTrigger`
- **Webhook** : `n8n-nodes-base.webhook`
- **Gmail** : `n8n-nodes-base.gmail`
- **Google Sheets** : `n8n-nodes-base.googleSheets`
- **Slack** : `n8n-nodes-base.slack`

## üèóÔ∏è Processus de Cr√©ation de Workflows

### √âtape 1 : Planification
1. **Identifier l'objectif** du workflow
2. **Lister les nodes n√©cessaires**
3. **D√©finir le flux de donn√©es**
4. **Pr√©voir les connexions**

### √âtape 2 : Structure JSON
1. **Cr√©er l'objet workflow** de base
2. **Ajouter les nodes** avec param√®tres
3. **D√©finir les positions** (espacement 250px)
4. **Configurer les connexions**

### √âtape 3 : Positionnement
- **Espacement horizontal** : 250px entre nodes
- **Position de d√©part** : [250, 300]
- **Flux principal** : gauche ‚Üí droite
- **Branches** : d√©calage vertical de 200px

### √âtape 4 : Param√®tres Sp√©cifiques

#### LangChain Chat Model
```json
{
  "parameters": {
    "options": {
      "temperature": 0.7,
      "maxTokens": 1000
    }
  },
  "type": "@langchain/n8n-nodes-langchain.lmChatOpenAi"
}
```

#### HTTP Request
```json
{
  "parameters": {
    "url": "https://api.example.com",
    "method": "POST",
    "headers": {
      "Content-Type": "application/json"
    },
    "body": {
      "data": "={{ $json.data }}"
    }
  },
  "type": "n8n-nodes-base.httpRequest"
}
```

## üìÅ Organisation des Workflows MasterClass

### Module 1 - Fondamentaux
- `1-1-premier-workflow-google-sheets.json`
- `1-2-webhook-slack-notification.json`
- `1-3-manipulation-donnees-crm.json`
- `1-4-integration-gmail-drive.json`

### Module 2 - Int√©grations
- `2-1-automation-email-complete.json`
- `2-2-sync-fichiers-cloud.json`
- `2-3-pipeline-donnees-db.json`
- `2-4-api-webhook-avance.json`

### Module 3 - Business
- `3-1-crm-lead-scoring.json`
- `3-2-marketing-automation-complet.json`
- `3-3-ecommerce-gestion-complete.json`
- `3-4-productivite-assistant-personnel.json`

### Module 4 - Avanc√©
- `4-1-fonctions-javascript-avancees.json`
- `4-2-architecture-workflow-complexe.json`
- `4-3-ia-machine-learning-integration.json`
- `4-4-monitoring-devops-complet.json`

### Module 5 - Premium
- `5-1-marketplace-monetisation-system.json`
- `5-2-node-custom-developpement.json`
- `5-3-architecture-distribuee.json`
- `5-4-ecosysteme-analyse-complete.json`

## üîó Bonnes Pratiques

### Conventions de Nommage
- **Workflows** : `{module}-{video}-{description-courte}.json`
- **Nodes** : Noms descriptifs en fran√ßais
- **Variables** : camelCase pour consistance

### Structure Donn√©es
- **Input standardis√©** : Toujours pr√©voir un exemple de donn√©es
- **Error handling** : Inclure des branches d'erreur
- **Documentation** : Notes dans les workflows

### Performance
- **Lazy loading** : Ne pas charger toutes les donn√©es d'un coup
- **Batch processing** : Traiter par lots si > 100 items
- **Cache intelligent** : Utiliser des variables pour √©viter les appels r√©p√©t√©s

## üéØ Objectifs P√©dagogiques par Module

### Module 1 : Familiarisation
- Interface n8n
- Concepts de base
- Premiers workflows simples

### Module 2 : Int√©gration
- Connexions externes
- APIs et webhooks
- Gestion de donn√©es

### Module 3 : Applications Business
- Cas d'usage r√©els
- ROI et m√©trics
- Workflows production

### Module 4 : Expertise Technique
- Code avanc√©
- Architecture
- Performance

### Module 5 : Mastery
- Mon√©tisation
- √âcosyst√®me
- Vision strat√©gique

## üìù Notes Importantes

1. **Toujours tester** les workflows avant de les inclure
2. **Documenter les pr√©requis** (APIs keys, permissions, etc.)
3. **Inclure des donn√©es d'exemple** pour chaque workflow
4. **Pr√©voir des versions simplifi√©es** pour d√©butants
5. **Maintenir la coh√©rence** entre script vid√©o et workflow r√©el

## üîÑ Workflow de Mise √† Jour

1. **Modifier le script** vid√©o si n√©cessaire
2. **Adapter le workflow** n8n correspondant
3. **Tester en local** 
4. **Valider la coh√©rence** p√©dagogique
5. **Commiter les changements**

Cette documentation assure la coh√©rence entre les scripts de formation et les workflows n8n pratiques, garantissant une exp√©rience d'apprentissage optimale.

## MCP (Model Context Protocol) Servers disponibles

Une structure centralis√©e de MCP servers a √©t√© mise en place dans `/var/www/MCP/` pour √™tre partag√©e entre tous les projets.

### MCP install√©s et disponibles :

#### ‚úÖ Install√©s et fonctionnels
- **mcp-server-mysql** : Connexion MySQL directe (dans core/)
- **task-master-ai** : Gestion de t√¢ches IA avanc√©e (dans core/claude-task-master/)
- **exa-mcp-server** : Recherche IA puissante (dans ai/)
- **datadog-mcp-server** : Monitoring et observabilit√© (dans devops/)
- **playwright-mcp-server** : Automatisation navigateur (dans testing/)

#### üîÑ En attente / Placeholders
- **laravel-mcp** : Int√©gration Laravel (placeholder)
- **laravel-loop** : Bridge Laravel pour AI (placeholder)
- **n8n-mcp** : D√©j√† pr√©sent dans automation/ (d√©plac√© depuis automatehub)

### Configuration dans claude_desktop_config.json

Exemple pour MySQL :
```json
{
  "mcpServers": {
    "mysql": {
      "command": "node",
      "args": ["/var/www/MCP/core/mcp-server-mysql/node_modules/.bin/mcp-mysql-server"],
      "env": {
        "DB_HOST": "localhost",
        "DB_USER": "your_user",
        "DB_PASSWORD": "your_password",
        "DB_NAME": "your_database"
      }
    }
  }
}
```

Exemple pour Task Master :
```json
{
  "mcpServers": {
    "task-master": {
      "command": "npx",
      "args": ["task-master-ai", "mcp"],
      "cwd": "/var/www/MCP/core/claude-task-master",
      "env": {
        "ANTHROPIC_API_KEY": "your_api_key"
      }
    }
  }
}
```

### MCP recommand√©s pour ce projet

- mysql (base de donn√©es)
- n8n-mcp (workflows)
- task-master (gestion des t√¢ches)

---
*MCP install√©s le : Sun Jul 13 12:01:15 CEST 2025*

