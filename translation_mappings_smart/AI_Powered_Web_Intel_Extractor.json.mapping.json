{
  "workflow_path": "/var/www/automatehub/workflows_traduits/FR/AutomationTribe/11 - Extracteur Web Intellignet/AI_Powered_Web_Intel_Extractor.json",
  "texts_map": {
    "$text_1": {
      "original": "Extracteur d'Intel Web Alimenté par IA",
      "path": "name",
      "context": "workflow_name",
      "has_prefix": false
    },
    "$text_2": {
      "original": "Lorsque le message de chat est reçu",
      "path": "nodes[0].name",
      "context": "node_name",
      "has_prefix": false
    },
    "$text_3": {
      "original": "{\n  \"queries\": [\n    {\n      \"url\": \"https://www.squarespace.com\",\n      \"prompt\": \"list all available pricing plans with their features\"\n    },\n    {\n      \"url\": \"https://www.wordpress.com\", \n      \"prompt\": \"describe all blogging-related tools and functionalities\"\n    }\n  ]\n}",
      "path": "nodes[1].parameters.jsonSchemaExample",
      "context": "user_text",
      "has_prefix": false
    },
    "$text_4": {
      "original": "Analyseur de Sortie Structurée",
      "path": "nodes[1].name",
      "context": "node_name",
      "has_prefix": false
    },
    "$text_5": {
      "original": "## Understand the Question",
      "path": "nodes[2].parameters.content",
      "context": "message",
      "has_prefix": false
    },
    "$text_6": {
      "original": "## Scrape Relevant Info",
      "path": "nodes[3].parameters.content",
      "context": "message",
      "has_prefix": false
    },
    "$text_7": {
      "original": "## Structure & Answer with AI",
      "path": "nodes[4].parameters.content",
      "context": "message",
      "has_prefix": false
    },
    "$text_8": {
      "original": "return [\n  {\n    json: items[0].json.data.json\n  }\n];",
      "path": "nodes[5].parameters.jsCode",
      "context": "user_text",
      "has_prefix": false
    },
    "$text_9": {
      "original": "Given a user message, examine the content to identify any web links and related questions. For each distinct combination of question and URL, produce a structured response.\n\n<rules>\n- Identify direct links or deduce them from well-known company or product names\n- Reframe questions into specific, attribute-oriented queries\n- Exclude brand names from the final prompts\n- When multiple links or questions exist, create a separate entry for each pairing\n- Ensure all URLs begin with HTTPS\n</rules>\n\n<output_format>\n{\n  \"queries\": [\n    {\n      \"url\": \"https://www.example.com\",\n      \"prompt\": \"reworded question\"\n    }\n  ]\n}\n</output_format>\n\n<examples>\nInput: \"Compare Squarespace pricing plans with WordPress blogging tools\"\nOutput: {\n  \"queries\": [\n    {\n      \"url\": \"https://www.squarespace.com\",\n      \"prompt\": \"list all available pricing plans with their features\"\n    },\n    {\n      \"url\": \"https://www.wordpress.com\", \n      \"prompt\": \"describe all blogging-related tools and functionalities\"\n    }\n  ]\n}\n\nInput: \"What templates does Webflow offer?\"\nOutput: {\n  \"queries\": [\n    {\n      \"url\": \"https://www.webflow.com\",\n      \"prompt\": \"list all available templates and design categories\"\n    }\n  ]\n}\n</examples>\n\n<error_handling>\nIf no direct link is found:\n\n1. Ask the user to supply a URL if it's not obvious\n2. Try to deduce the website from the service or company name\n3. If it can't be resolved, return an appropriate error response\n</error_handling>",
      "path": "nodes[6].parameters.messages.messageValues[0].message",
      "context": "user_text",
      "has_prefix": true
    },
    "$text_10": {
      "original": "Analyseur de Sortie Auto-Correction",
      "path": "nodes[7].name",
      "context": "node_name",
      "has_prefix": false
    },
    "$text_11": {
      "original": "<data>\n{{ JSON.stringify($json, null, 2) }}\n</data>\n\n<original question>\n{{ JSON.stringify($('Ai Agent').item.json.output.queries, null, 2) }}\n{{ $('When chat message received').item.json.chatInput }}\n\n</original question>",
      "path": "nodes[10].parameters.text",
      "context": "prompt",
      "has_prefix": true
    },
    "$text_12": {
      "original": "Format the incoming data using markdown syntax. Only extract information that directly answers the original questions. Present the answer using only the information available in the provided data.\n\nDo not fabricate, invent, or include any information that isn't explicitly present in the source material.",
      "path": "nodes[10].parameters.messages.messageValues[0].message",
      "context": "user_text",
      "has_prefix": true
    },
    "$text_13": {
      "original": "Formater la Réponse",
      "path": "nodes[10].name",
      "context": "node_name",
      "has_prefix": false
    },
    "$text_14": {
      "original": "{\n  \"url\": \"{{ $json.output.queries[0].url }}\",\n  \"formats\": [\n    \"json\"\n  ],\n  \"jsonOptions\": {\n    \"prompt\": \"{{ $json.output.queries[0].prompt }}\"\n  }\n}",
      "path": "nodes[11].parameters.jsonBody",
      "context": "user_text",
      "has_prefix": true
    },
    "$text_15": {
      "original": "Auto-Fix Output Parser",
      "path": "connections.Structured Output Parser.ai_outputParser[0][0].node",
      "context": "user_text",
      "has_prefix": false
    },
    "$text_16": {
      "original": "Auto-Fix Output Parser",
      "path": "connections.Open AI.ai_languageModel[0][1].node",
      "context": "user_text",
      "has_prefix": false
    },
    "$text_17": {
      "original": "For SALE",
      "path": "tags[0].name",
      "context": "user_text",
      "has_prefix": false
    }
  },
  "modified_workflow": {
    "name": "$text_1",
    "nodes": [
      {
        "parameters": {
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.chatTrigger",
        "typeVersion": 1.1,
        "position": [
          -280,
          120
        ],
        "id": "8af3cf4d-82c8-47cc-9ec9-636238ba938b",
        "name": "$text_2",
        "webhookId": "daddf490-77c5-4843-9152-371ebbf8c933"
      },
      {
        "parameters": {
          "jsonSchemaExample": "$text_3"
        },
        "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
        "typeVersion": 1.2,
        "position": [
          180,
          500
        ],
        "id": "f0f6473d-7d9d-4465-8410-7310fa71b232",
        "name": "$text_4"
      },
      {
        "parameters": {
          "content": "$text_5",
          "height": 660,
          "width": 460
        },
        "type": "n8n-nodes-base.stickyNote",
        "typeVersion": 1,
        "position": [
          -120,
          20
        ],
        "id": "e659bc92-e2a2-4a1f-8a8c-4a3e93588a2c",
        "name": "Note Collante"
      },
      {
        "parameters": {
          "content": "$text_6",
          "height": 660,
          "width": 360,
          "color": 3
        },
        "type": "n8n-nodes-base.stickyNote",
        "typeVersion": 1,
        "position": [
          360,
          20
        ],
        "id": "32fbd819-b298-4f71-bc3a-7f2519226116",
        "name": "Note Collante1"
      },
      {
        "parameters": {
          "content": "$text_7",
          "height": 660,
          "width": 480,
          "color": 4
        },
        "type": "n8n-nodes-base.stickyNote",
        "typeVersion": 1,
        "position": [
          740,
          20
        ],
        "id": "68fc0448-b763-4de8-9cda-4beda2502dbd",
        "name": "Note Collante2"
      },
      {
        "parameters": {
          "jsCode": "$text_8"
        },
        "type": "n8n-nodes-base.code",
        "typeVersion": 2,
        "position": [
          480,
          440
        ],
        "id": "e36b9670-094f-4f3e-8a8f-1f7d04ff5756",
        "name": "Code"
      },
      {
        "parameters": {
          "hasOutputParser": true,
          "messages": {
            "messageValues": [
              {
                "type": "HumanMessagePromptTemplate",
                "message": "=$text_9"
              }
            ]
          }
        },
        "type": "@n8n/n8n-nodes-langchain.chainLlm",
        "typeVersion": 1.5,
        "position": [
          -20,
          120
        ],
        "id": "d2b99614-ec49-4362-8e4b-6eaa1d151197",
        "name": "Agent IA",
        "retryOnFail": true
      },
      {
        "parameters": {
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.outputParserAutofixing",
        "typeVersion": 1,
        "position": [
          40,
          340
        ],
        "id": "0fc3a8e2-5a48-4f3d-a7fd-f7c45a410211",
        "name": "$text_10"
      },
      {
        "parameters": {
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
        "typeVersion": 1.1,
        "position": [
          -60,
          500
        ],
        "id": "1b1222e4-4447-4e46-8887-1496ee7e7a6e",
        "name": "Open AI",
        "credentials": {
          "openAiApi": {
            "id": "wMKWK2pxtmnFBWY4",
            "name": "OpenAi account"
          }
        }
      },
      {
        "parameters": {
          "options": {}
        },
        "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
        "typeVersion": 1.1,
        "position": [
          1040,
          460
        ],
        "id": "bde1822b-99d6-49d5-a257-b43e7ff202aa",
        "name": "Open AI1",
        "credentials": {
          "openAiApi": {
            "id": "wMKWK2pxtmnFBWY4",
            "name": "OpenAi account"
          }
        }
      },
      {
        "parameters": {
          "promptType": "define",
          "text": "=$text_11",
          "messages": {
            "messageValues": [
              {
                "type": "HumanMessagePromptTemplate",
                "message": "=$text_12"
              }
            ]
          }
        },
        "type": "@n8n/n8n-nodes-langchain.chainLlm",
        "typeVersion": 1.5,
        "position": [
          840,
          120
        ],
        "id": "22eab644-d20e-4487-809a-ebe0deffccf2",
        "name": "$text_13"
      },
      {
        "parameters": {
          "method": "POST",
          "url": "https://api.firecrawl.dev/v1/scrape",
          "sendHeaders": true,
          "headerParameters": {
            "parameters": [
              {
                "name": "Authorization",
                "value": "Bearer fc-0a46eee422b9476d83e503b1b1682d15"
              }
            ]
          },
          "sendBody": true,
          "specifyBody": "json",
          "jsonBody": "=$text_14",
          "options": {
            "batching": {
              "batch": {
                "batchSize": 1
              }
            }
          }
        },
        "id": "6755354c-5d5c-4714-aa78-65156cd07bfe",
        "name": "Extraire l'URL1",
        "type": "n8n-nodes-base.httpRequest",
        "typeVersion": 4.2,
        "position": [
          460,
          120
        ],
        "retryOnFail": false,
        "waitBetweenTries": 1000,
        "maxTries": 3
      }
    ],
    "pinData": {},
    "connections": {
      "When chat message received": {
        "main": [
          [
            {
              "node": "Ai Agent",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Structured Output Parser": {
        "ai_outputParser": [
          [
            {
              "node": "$text_15",
              "type": "ai_outputParser",
              "index": 0
            }
          ]
        ]
      },
      "Code": {
        "main": [
          [
            {
              "node": "Format Answer",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Ai Agent": {
        "main": [
          [
            {
              "node": "Scrape URL1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Auto-Fix Output Parser": {
        "ai_outputParser": [
          [
            {
              "node": "Ai Agent",
              "type": "ai_outputParser",
              "index": 0
            }
          ]
        ]
      },
      "Open AI": {
        "ai_languageModel": [
          [
            {
              "node": "Ai Agent",
              "type": "ai_languageModel",
              "index": 0
            },
            {
              "node": "$text_16",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "Open AI1": {
        "ai_languageModel": [
          [
            {
              "node": "Format Answer",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "Scrape URL1": {
        "main": [
          [
            {
              "node": "Code",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    },
    "active": false,
    "settings": {
      "executionOrder": "v1"
    },
    "versionId": "636d7483-8f59-4cfd-a349-20bd9ec9c7c7",
    "meta": {
      "templateCredsSetupCompleted": true,
      "instanceId": "bd95e83f261cee4e80d731cb58d1c4799127663205327ab783b076c62312dcdf"
    },
    "id": "1pXwIpBqErt2eWCu",
    "tags": [
      {
        "createdAt": "2025-03-28T11:51:08.303Z",
        "updatedAt": "2025-03-28T11:51:08.303Z",
        "id": "vSPoP03SVSfq37t2",
        "name": "$text_17"
      },
      {
        "id": "1",
        "name": "Audelalia"
      }
    ]
  }
}