{
  "name": "G√©n√©ration Posts R√©seaux Sociaux - Content Extractor",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [
        -464,
        208
      ],
      "id": "32a51a05-9be1-437c-b3ac-b5b0ffc2e181",
      "name": "When clicking 'Test workflow'"
    },
    {
      "parameters": {
        "operation": "search",
        "base": {
          "__rl": true,
          "value": "appiBRaQQh32fMnYc",
          "mode": "list",
          "cachedResultName": "Id√©es Posts R√©seaux Sociaux"
        },
        "table": {
          "__rl": true,
          "value": "tblPdvidblRqBLFrd",
          "mode": "list",
          "cachedResultName": "Table 1"
        },
        "filterByFormula": "=",
        "returnAll": false,
        "limit": 1,
        "options": {},
        "sort": {
          "property": [
            {
              "field": "Last modified time",
              "direction": "desc"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        -160,
        208
      ],
      "id": "eed70dbb-be50-40d6-889c-72ff06ee6bea",
      "name": "Airtable",
      "alwaysOutputData": false
    },
    {
      "parameters": {
        "inputText": "={{ $json.URL }}",
        "categories": {
          "categories": [
            {
              "category": "Youtube link",
              "description": "Youtube link"
            },
            {
              "category": "Blog post",
              "description": "Blog post or any other link if it is not from youtube"
            }
          ]
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.textClassifier",
      "typeVersion": 1,
      "position": [
        64,
        208
      ],
      "id": "083018ae-23f5-48ce-a278-ce241dc4408b",
      "name": "Classificateur de texte"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4o-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        64,
        432
      ],
      "id": "a1cc4b48-1cc7-48b7-a888-60d539f19394",
      "name": "Mod√®le de Chat OpenAI"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://localhost:5678/api/v1/get-youtube-transcript",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer {{ $env.CONTENT_EXTRACTOR_API_KEY }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "videoUrl",
              "value": "={{ $json.URL }}"
            },
            {
              "name": "includeTimestamps",
              "value": "=true"
            },
            {
              "name": "timestampsToCombine",
              "value": "=5"
            },
            {
              "name": "preferredLanguage",
              "value": "fr"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        480,
        64
      ],
      "id": "fae5bd3c-a4cb-45bc-8e64-4ba7cb3c8a9f",
      "name": "Content Extractor - YouTube",
      "notes": "Remplace Dumpling AI - Extraction YouTube"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://localhost:5678/api/v1/scrape",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer {{ $env.CONTENT_EXTRACTOR_API_KEY }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "url",
              "value": "={{ $json.URL }}"
            },
            {
              "name": "format",
              "value": "markdown"
            },
            {
              "name": "cleaned",
              "value": "=true"
            },
            {
              "name": "renderJs",
              "value": "=true"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        480,
        352
      ],
      "id": "a3f947d4-97e8-4a1c-8b99-63f5386b572e",
      "name": "Content Extractor - Blog",
      "notes": "Remplace Dumpling AI - Scraping Web"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "GPT-4O-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=G√©n√©rer des publications personnalis√©es pour les r√©seaux sociaux pour LinkedIn, Instagram, Twitter (X) et Facebook bas√©es sur le contenu fourni, qui pourrait √™tre soit un r√©sum√© d'article ou une transcription YouTube.\n\t‚Ä¢\tLinkedIn : √âcrire une publication professionnelle et perspicace r√©sumant les points cl√©s avec un ton formel, positionnant le contenu comme une ressource pr√©cieuse.\n\t‚Ä¢\tInstagram : Cr√©er une l√©gende courte et engageante avec un appel √† l'action convaincant et des hashtags pertinents pour stimuler l'interaction.\n\t‚Ä¢\tTwitter (X) : Cr√©er une publication concise de moins de 280 caract√®res qui met en √©vidence les points cl√©s et inclut quelques hashtags percutants.\n\t‚Ä¢\tFacebook : D√©velopper une publication conversationnelle qui fournit un contexte suppl√©mentaire et inclut un lien vers l'article ou la vid√©o pour encourager l'engagement.\n\nCeci devrait √™tre √©crit d'un point de vue √† la troisi√®me personne, positionnant le contenu comme une source externe d'information.\n\n**Ou Transcription YouTube :**\n{{ $json?.transcript ?? 'Transcription non disponible' }}\n\nLa r√©ponse doit √™tre structur√©e en format JSON valide comme suit :\n\n{\n  \"linkedin\": \"Ce contenu explore [sujet cl√©], offrant des perspectives sur [points principaux]. Les professionnels cherchant √† [objectif ou impact] trouveront des strat√©gies pr√©cieuses ici. Lire plus : [URL]\",\n  \"instagram\": \"D√©couvrez comment [sujet cl√©] peut transformer votre [industrie ou domaine] ! üöÄ Voir/lire les derni√®res perspectives maintenant. #Innovation #Succ√®s #VotreHashtag [URL]\",\n  \"twitter\": \"[Sujet cl√©] change la donne ! D√©couvrir les derni√®res perspectives sur [point principal]. #Tendance #VotreHashtag [URL]\",\n  \"facebook\": \"√Ä lire/regarder absolument sur [sujet cl√©] ! Il d√©compose [point principal] et offre des perspectives pr√©cieuses pour ceux dans [industrie]. Plongez-y : [URL]\"\n}\n\nAssurez-vous que la sortie est toujours un objet JSON correctement format√©."
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        768,
        64
      ],
      "id": "3ae85875-5ada-4938-b178-76723248e9b0",
      "name": "OpenAI"
    },
    {
      "parameters": {
        "operation": "update",
        "documentURL": "1uCsWoY62zjxN1wKyRBYpJHqVo5fmxYUUrYczSl4jLNY",
        "actionsUi": {
          "actionFields": [
            {
              "action": "insert",
              "text": "=Current date: {{ $now.format('dd LLL yyyy') }}\n\nLinked in post:\n{{ $json.fields.LinkedIn }}\n\nInstagram:\n{{ $json.fields.Instagram }}\n\nTwitter:\n{{ $json.fields.X }}\n\nFacebook:\n{{ $json.fields.Facebook }}\n\n"
            }
          ]
        }
      },
      "type": "n8n-nodes-base.googleDocs",
      "typeVersion": 2,
      "position": [
        1552,
        208
      ],
      "id": "b0fde938-ba6a-4faf-864d-bea3847019be",
      "name": "Google Docs"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4o-mini",
          "mode": "list",
          "cachedResultName": "GPT-4O-MINI"
        },
        "messages": {
          "values": [
            {
              "content": "=G√©n√©rer des publications personnalis√©es pour les r√©seaux sociaux pour LinkedIn, Instagram, Twitter (X) et Facebook bas√©es sur le r√©sum√© d'article suivant :\n\t‚Ä¢\tLinkedIn : √âcrire une publication professionnelle et perspicace qui r√©sume les points cl√©s avec un ton formel, positionnant l'article comme une ressource pr√©cieuse.\n\t‚Ä¢\tInstagram : Cr√©er une l√©gende courte et engageante avec un appel √† l'action convaincant et des hashtags pertinents pour stimuler l'interaction.\n\t‚Ä¢\tTwitter (X) : Cr√©er une publication concise de moins de 280 caract√®res qui met en √©vidence les points cl√©s et inclut quelques hashtags percutants.\n\t‚Ä¢\tFacebook : D√©velopper une publication conversationnelle qui fournit un contexte suppl√©mentaire et inclut un lien vers l'article pour encourager l'engagement.\n\nCeci devrait √™tre √©crit comme en se r√©f√©rant √† l'article d'un point de vue √† la troisi√®me personne, le positionnant comme une source externe d'information.\n\n**R√©sum√© d'article :**\n{{ $('Content Extractor - Blog')?.item?.json?.title ?? 'Titre non disponible' }}\n{{ $('Content Extractor - Blog')?.item?.json?.metadata?.description ?? 'Description non disponible' }}\n{{ $('Content Extractor - Blog')?.item?.json?.content ?? 'Contenu non disponible' }}\n{{ $('Classificateur de texte')?.item?.json?.URL ?? 'URL non disponible' }}\n\nLa r√©ponse devrait √™tre format√©e en JSON valide avec la structure suivante :\n\n{\n  \"linkedin\": \"Cet article explore [sujet cl√©], fournissant des perspectives sur [points principaux]. Les professionnels cherchant √† [objectif ou impact] trouveront des strat√©gies pr√©cieuses ici. Lire plus : [URL]\",\n  \"instagram\": \"D√©couvrez comment [sujet cl√©] peut transformer votre [industrie ou domaine] ! üöÄ Lire les derni√®res perspectives maintenant. #Innovation #Succ√®s #VotreHashtag [URL]\",\n  \"twitter\": \"[Sujet cl√©] change la donne ! D√©couvrir les derni√®res perspectives sur [point principal]. #Tendance #VotreHashtag [URL]\",\n  \"facebook\": \"Un article √† lire absolument sur [sujet cl√©] ! Il d√©compose [point principal] et offre des perspectives pr√©cieuses pour ceux dans [industrie]. Plongez-y : [URL]\"\n}\n\n"
            }
          ]
        },
        "jsonOutput": true,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        768,
        352
      ],
      "id": "3182ef44-95e9-4968-86dc-3210707e0fa9",
      "name": "OpenAI1"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appiBRaQQh32fMnYc",
          "mode": "list",
          "cachedResultName": "Id√©es Posts R√©seaux Sociaux"
        },
        "table": {
          "__rl": true,
          "value": "tblPdvidblRqBLFrd",
          "mode": "list",
          "cachedResultName": "Table 1"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Airtable').item.json.id }}",
            "LinkedIn": "={{ $json.message.content.linkedin }}",
            "Instagram": "={{ $json.message.content.instagram }}",
            "X": "={{ $json.message.content.twitter }}",
            "Facebook": "={{ $json.message.content.facebook }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "LinkedIn",
              "displayName": "LinkedIn",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Instagram",
              "displayName": "Instagram",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "X",
              "displayName": "X",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1152,
        64
      ],
      "id": "5e394810-206c-4a19-a8e4-d5e63a7b0636",
      "name": "Airtable1"
    },
    {
      "parameters": {
        "operation": "update",
        "base": {
          "__rl": true,
          "value": "appiBRaQQh32fMnYc",
          "mode": "list",
          "cachedResultName": "Id√©es Posts R√©seaux Sociaux"
        },
        "table": {
          "__rl": true,
          "value": "tblPdvidblRqBLFrd",
          "mode": "list",
          "cachedResultName": "Table 1"
        },
        "columns": {
          "mappingMode": "defineBelow",
          "value": {
            "id": "={{ $('Airtable').item.json.id }}",
            "LinkedIn": "={{ $json.message.content.linkedin }}",
            "Instagram": "={{ $json.message.content.instagram }}",
            "X": "={{ $json.message.content.twitter }}",
            "Facebook": "={{ $json.message.content.facebook }}"
          },
          "matchingColumns": [
            "id"
          ],
          "schema": [
            {
              "id": "id",
              "displayName": "id",
              "required": false,
              "defaultMatch": true,
              "display": true,
              "type": "string",
              "readOnly": true,
              "removed": false
            },
            {
              "id": "LinkedIn",
              "displayName": "LinkedIn",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Instagram",
              "displayName": "Instagram",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "X",
              "displayName": "X",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            },
            {
              "id": "Facebook",
              "displayName": "Facebook",
              "required": false,
              "defaultMatch": false,
              "canBeUsedToMatch": true,
              "display": true,
              "type": "string",
              "readOnly": false,
              "removed": false
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.airtable",
      "typeVersion": 2.1,
      "position": [
        1152,
        352
      ],
      "id": "70a40531-2c15-4a18-9748-78a7d74cbcb9",
      "name": "Airtable2"
    },
    {
      "parameters": {
        "jsCode": "// Configuration pour Content Extractor\n// Ajouter la cl√© API dans les variables d'environnement de n8n\n// CONTENT_EXTRACTOR_API_KEY = votre-cle-api\n\n// Note: Cette solution remplace Dumpling AI (49‚Ç¨/mois)\n// Co√ªt avec Content Extractor: 0,10‚Ç¨ par extraction\n// ou inclus dans l'abonnement Premium AutomateHub\n\nreturn $input.all();"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        -160,
        432
      ],
      "id": "config-node",
      "name": "Configuration"
    }
  ],
  "connections": {
    "When clicking 'Test workflow'": {
      "main": [
        [
          {
            "node": "Airtable",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Airtable": {
      "main": [
        [
          {
            "node": "Classificateur de texte",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Classificateur de texte": {
      "main": [
        [
          {
            "node": "Content Extractor - YouTube",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Content Extractor - Blog",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Mod√®le de Chat OpenAI": {
      "ai_languageModel": [
        [
          {
            "node": "Classificateur de texte",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Content Extractor - YouTube": {
      "main": [
        [
          {
            "node": "OpenAI",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Content Extractor - Blog": {
      "main": [
        [
          {
            "node": "OpenAI1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI": {
      "main": [
        [
          {
            "node": "Airtable1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI1": {
      "main": [
        [
          {
            "node": "Airtable2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Airtable1": {
      "main": [
        [
          {
            "node": "Google Docs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Airtable2": {
      "main": [
        [
          {
            "node": "Google Docs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "meta": {
    "templateCredsSetupCompleted": false,
    "instanceId": "content-extractor-automatehub"
  }
}